"use strict";(self.webpackChunknobleui_angular=self.webpackChunknobleui_angular||[]).push([[25],{1025:(pe,Z,l)=>{l.r(Z),l.d(Z,{LocationsModule:()=>de});var m=l(6895),d=l(265),A=l(9585),x=l(9628),F=l(907),N=l(4826),U=l(5351),q=l(6134),r=l(433),p=l(8796),w=l(1094),D=l(5226),c=l.n(D),g=l(8372),f=l(3900),_=l(7579),e=l(4650),C=l(7696),T=l(8489),b=l(7447);function L(n,a){1&n&&(e.TgZ(0,"div",30),e._uU(1," Kh\xf4ng \u0111\u1ec3 tr\u1ed1ng t\xean chi nh\xe1nh "),e.qZA())}function S(n,a){1&n&&(e.TgZ(0,"div",30),e._uU(1," Kh\xf4ng \u0111\u1ec3 tr\u1ed1ng S\u1ed1 \u0111i\u1ec7n tho\u1ea1i "),e.qZA())}function I(n,a){if(1&n&&(e.TgZ(0,"ng-option",31),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function J(n,a){if(1&n&&(e.TgZ(0,"ng-option",31),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function y(n,a){if(1&n&&(e.TgZ(0,"ng-option",31),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function Q(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",11)(2,"label",14),e._uU(3," Ch\u1ecdn X\xe3 "),e.qZA(),e.TgZ(4,"ng-select",32),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.codeWard=o)}),e.YNc(5,y,2,2,"ng-option",21),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("searchable",!0)("ngModel",t.codeWard),e.xp6(1),e.Q6J("ngForOf",t.wards)}}function B(n,a){1&n&&(e.TgZ(0,"div",30),e._uU(1," Kh\xf4ng \u0111\u1ec3 tr\u1ed1ng t\xean \u0111\u1ecba ch\u1ec9 chi ti\u1ebft "),e.qZA())}function M(n,a){if(1&n&&(e.TgZ(0,"ng-option",31),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",+t.id),e.xp6(1),e.hij(" ",t.name," ")}}function Y(n,a){1&n&&(e.TgZ(0,"div",30),e._uU(1," Kh\xf4ng \u0111\u1ec3 tr\u1ed1ng lo\u1ea1i chi nh\xe1nh "),e.qZA())}function O(n,a){if(1&n&&(e.TgZ(0,"ng-option",31),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",+t.id),e.xp6(1),e.hij(" ",t.name," ")}}function j(n,a){1&n&&(e.TgZ(0,"div",30),e._uU(1," Kh\xf4ng \u0111\u1ec3 tr\u1ed1ng tr\u1ea1ng th\xe1i chi nh\xe1nh "),e.qZA())}let H=(()=>{class n{constructor(t,i,o,s,u){this.formBuilder=t,this._locaService=i,this.AresService=o,this.router=s,this.configService=u,this.status=[],this.is_main=[],this.provinceChangeSubject=new _.x,this.districtChangeSubject=new _.x,this.provinces=[],this.districts=[],this.wards=[],this.isWardDataLoaded=!1,this.locationsForm=new r.cw({name:new r.NI("",r.kI.required),image:new r.NI(""),description:new r.NI(""),tel:new r.NI("",r.kI.required),email:new r.NI(""),province_code:new r.NI(""),district_code:new r.NI(""),ward_code:new r.NI(""),address_detail:new r.NI("",r.kI.required),status:new r.NI("",r.kI.required),is_main:new r.NI("",r.kI.required)}),this.district=[],this.ward=[],this.domain_name=this.configService.domain_name}ngOnInit(){this.status=[{id:0,name:"\u0110\xf3ng c\u1eeda"},{id:1,name:"Ho\u1ea1t \u0111\u1ed9ng"}],this.is_main=[{id:0,name:"Chi nh\xe1nh m\u1eb7c \u0111\u1ecbnh"},{id:1,name:"Chi nh\xe1nh ph\u1ee5"}],this.AresService.getProvinces().subscribe(t=>{this.provinces="error"!=t.status?t.results:[{id:0,name:`${t.message}`}]}),this.provinceChangeSubject.pipe((0,g.b)(300),(0,f.w)(t=>this.AresService.getDistricts(t))).subscribe(t=>{this.districts="error"!=t.status?t.results:[{id:0,name:`${t.message}`}],this.district=t.results}),this.districtChangeSubject.pipe((0,g.b)(300),(0,f.w)(t=>this.AresService.getWards(t))).subscribe(t=>{this.wards="error"!=t.status?t.results:{id:0,name:`${t.message}`,status:!1},this.ward=t.results,this.isWardDataLoaded="error"!=t.status})}onProvinceChange(){this.provinceChangeSubject.next(Number(this.locationsForm.value.province_code))}onDistrictChange(){this.districtChangeSubject.next(Number(this.locationsForm.value.district_code))}onFileChange(t){const i=t.target.files;if(i&&i.length>0){const o=i[0];if(!["image/jpeg","image/png","image/gif"].includes(o.type))return void c().fire({icon:"error",title:"L\u1ed7i!",text:"Lo\u1ea1i t\u1ec7p kh\xf4ng h\u1ee3p l\u1ec7. Ch\u1ec9 ch\u1ea5p nh\u1eadn c\xe1c t\u1ec7p JPG, PNG ho\u1eb7c GIF."}).then(()=>{t.target.value=""});if(o.size>5242880)return void c().fire({icon:"error",title:"L\u1ed7i!",text:"K\xedch th\u01b0\u1edbc t\u1ec7p qu\xe1 l\u1edbn. Vui l\xf2ng ch\u1ecdn m\u1ed9t t\u1ec7p nh\u1ecf h\u01a1n 5MB."}).then(()=>{t.target.value=""});this.img=o,console.log("T\u1ec7p h\xecnh \u1ea3nh h\u1ee3p l\u1ec7.")}else c().fire({icon:"error",title:"L\u1ed7i!",text:"Kh\xf4ng c\xf3 t\u1ec7p n\xe0o \u0111\u01b0\u1ee3c ch\u1ecdn."}).then(()=>{t.target.value=""})}onSubmit(){if(this.locationsForm.valid){const t=this.district.find(u=>u.id==this.codeDistrict)?.name??"",i=this.ward.find(u=>u.id==this.codeWard)?.name??"",o=new FormData,s=this.locationsForm.value;console.log(s),o.append("domain_name",String(this.domain_name)),this.locationsForm.value.image&&o.append("image",this.img),o.append("name",String(s.name)),o.append("email",String(s.email)),o.append("tel",String(s.tel)),o.append("status",String(s.status)),o.append("is_main",String(s.is_main)),o.append("address_detail",String(s.address_detail+", "+i+", "+t+", "+(this.provinces[this.codeProvince]?.name??""))),o.append("created_by","1"),o.append("province_code",String(s.province_code??"")),o.append("district_code",String(s.district_code??"")),o.append("ward_code",String(s.ward_code)),o.append("description",String(s.description)),console.log(o.get("address_detail")),this._locaService.createFormData(o).subscribe(u=>{if(1==u.status)this.locationsForm.reset(),c().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,title:"Th\xe0nh c\xf4ng!",text:"Th\xeam chi nh\xe1nh th\xe0nh c\xf4ng",icon:"success",timerProgressBar:!0,didOpen:h=>{h.addEventListener("mouseenter",c().stopTimer),h.addEventListener("mouseleave",c().resumeTimer)}}),this.router.navigate(["../locations/list"]);else{console.log(u);const h=[];for(const E in u.meta){const me=u.meta[E];for(const he of me)h.push(`${he}`)}this.showNextMessage(h)}},u=>{console.log(u),c().fire("L\u1ed7i!","C\xf3 l\u1ed7i x\u1ea3y ra khi g\u1eedi d\u1eef li\u1ec7u.","error")})}else alert("Kh\xf4ng \u0111\u1ec3 tr\u1ed1ng")}showNextMessage(t){if(t.length>0){const i=t.shift();c().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,title:"Th\u1ea5t b\u1ea1i!",text:i,icon:"error",timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",c().stopTimer),o.addEventListener("mouseleave",c().resumeTimer)},didClose:()=>{this.showNextMessage(t)}})}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.qu),e.Y36(C._),e.Y36(T.M),e.Y36(d.F0),e.Y36(b.E))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create"]],decls:78,vars:18,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","grid-margin","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title"],["enctype","multipart/form-data",1,"forms-sample",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","formFile",1,"form-label"],["type","file","id","formFile","formControlName","image",1,"form-control",3,"change"],["for","exampleInputUsername1",1,"form-label"],[1,"text-danger"],["type","text","id","exampleInputUsername1","formControlName","name","autocomplete","off","placeholder","Nh\u1eadp t\xean chi nh\xe1nh",1,"form-control"],["class","alert alert-danger mt-2",4,"ngIf"],["type","email","id","exampleInputUsername1","formControlName","email","autocomplete","off","placeholder","Nh\u1eadp email",1,"form-control"],["type","text","id","exampleInputUsername1","formControlName","tel","autocomplete","off","placeholder","Nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i",1,"form-control"],["formControlName","province_code","placeholder","Ch\u1ecdn T\u1ec9nh",3,"searchable","ngModel","change","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","district_code","placeholder","Ch\u1ecdn T\u1ec9nh",3,"searchable","ngModel","change","ngModelChange"],[4,"ngIf"],["id","exampleFormControlTextarea1","placeholder","Nh\u1eadp \u0111\u1ecba ch\u1ec9","formControlName","address_detail","rows","5",1,"form-control"],["id","exampleFormControlTextarea1","placeholder","Nh\u1eadp m\xf4 t\u1ea3","formControlName","description","rows","5",1,"form-control"],["formControlName","is_main","placeholder","Ch\u1ecdn chi nh\xe1nh",3,"searchable"],["formControlName","status","placeholder","Ch\u1ecdn Tr\u1ea1ng th\xe1i",3,"searchable"],["type","submit",1,"btn","btn-primary","me-2",3,"disabled"],["routerLink","/locations/list",1,"btn","btn-secondary"],[1,"alert","alert-danger","mt-2"],[3,"value"],["formControlName","ward_code","placeholder","Ch\u1ecdn X\xe3",3,"searchable","ngModel","ngModelChange"]],template:function(t,i){1&t&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._uU(4,"Danh m\u1ee5c"),e.qZA()(),e.TgZ(5,"li",4),e._uU(6," Th\xeam m\u1edbi chi nh\xe1nh "),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"h6",9),e._uU(12,"Th\xeam m\u1edbi Chi nh\xe1nh"),e.qZA(),e.TgZ(13,"form",10),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.TgZ(14,"div",11)(15,"label",12),e._uU(16,"\u1ea2nh \u0111\u1ea1i di\u1ec7n chi nh\xe1nh"),e.qZA(),e.TgZ(17,"input",13),e.NdJ("change",function(s){return i.onFileChange(s)}),e.qZA()(),e.TgZ(18,"div",11)(19,"label",14),e._uU(20," T\xean Chi Nh\xe1nh "),e.TgZ(21,"span",15),e._uU(22,"(*)"),e.qZA()(),e._UZ(23,"input",16),e.YNc(24,L,2,0,"div",17),e.qZA(),e.TgZ(25,"div",11)(26,"label",14),e._uU(27," Email "),e.qZA(),e._UZ(28,"input",18),e.qZA(),e.TgZ(29,"div",11)(30,"label",14),e._uU(31," S\u1ed1 \u0111i\u1ec7n tho\u1ea1i "),e.TgZ(32,"span",15),e._uU(33,"(*)"),e.qZA()(),e._UZ(34,"input",19),e.YNc(35,S,2,0,"div",17),e.qZA(),e.TgZ(36,"div",11)(37,"label",14),e._uU(38," T\u1ec9nh th\xe0nh ph\u1ed1 "),e.qZA(),e.TgZ(39,"ng-select",20),e.NdJ("change",function(){return i.onProvinceChange()})("ngModelChange",function(s){return i.codeProvince=s}),e.YNc(40,I,2,2,"ng-option",21),e.qZA()(),e.TgZ(41,"div",11)(42,"label",14),e._uU(43," Ch\u1ecdn Huy\u1ec7n "),e.qZA(),e.TgZ(44,"ng-select",22),e.NdJ("change",function(){return i.onDistrictChange()})("ngModelChange",function(s){return i.codeDistrict=s}),e.YNc(45,J,2,2,"ng-option",21),e.qZA()(),e.YNc(46,Q,6,3,"div",23),e.TgZ(47,"div",11)(48,"label",14),e._uU(49," \u0110\u1ecba ch\u1ec9 chi ti\u1ebft "),e.qZA(),e.TgZ(50,"span",15),e._uU(51,"(*)"),e.qZA(),e._UZ(52,"textarea",24),e.YNc(53,B,2,0,"div",17),e.qZA(),e.TgZ(54,"div",11)(55,"label",14),e._uU(56," M\xf4 t\u1ea3 ng\u1eafn "),e.qZA(),e._UZ(57,"textarea",25),e.qZA(),e.TgZ(58,"div",11)(59,"label",14),e._uU(60," Lo\u1ea1i chi nh\xe1nh "),e.qZA(),e.TgZ(61,"span",15),e._uU(62,"(*)"),e.qZA(),e.TgZ(63,"ng-select",26),e.YNc(64,M,2,2,"ng-option",21),e.qZA(),e.YNc(65,Y,2,0,"div",17),e.qZA(),e.TgZ(66,"div",11)(67,"label",14),e._uU(68," Tr\u1ea1ng th\xe1i "),e.qZA(),e.TgZ(69,"span",15),e._uU(70,"(*)"),e.qZA(),e.TgZ(71,"ng-select",27),e.YNc(72,O,2,2,"ng-option",21),e.qZA(),e.YNc(73,j,2,0,"div",17),e.qZA(),e.TgZ(74,"button",28),e._uU(75," T\u1ea1o m\u1edbi "),e.qZA(),e.TgZ(76,"button",29),e._uU(77," Tr\u1edf v\u1ec1 "),e.qZA()()()()()()),2&t&&(e.xp6(13),e.Q6J("formGroup",i.locationsForm),e.xp6(11),e.Q6J("ngIf",i.locationsForm.controls.name.invalid&&i.locationsForm.controls.name.touched),e.xp6(11),e.Q6J("ngIf",i.locationsForm.controls.tel.invalid&&i.locationsForm.controls.tel.touched),e.xp6(4),e.Q6J("searchable",!0)("ngModel",i.codeProvince),e.xp6(1),e.Q6J("ngForOf",i.provinces),e.xp6(4),e.Q6J("searchable",!0)("ngModel",i.codeDistrict),e.xp6(1),e.Q6J("ngForOf",i.districts),e.xp6(1),e.Q6J("ngIf",i.isWardDataLoaded),e.xp6(7),e.Q6J("ngIf",i.locationsForm.controls.address_detail.invalid&&i.locationsForm.controls.address_detail.touched),e.xp6(10),e.Q6J("searchable",!0),e.xp6(1),e.Q6J("ngForOf",i.is_main),e.xp6(1),e.Q6J("ngIf",i.locationsForm.controls.is_main.invalid&&i.locationsForm.controls.is_main.touched),e.xp6(6),e.Q6J("searchable",!0),e.xp6(1),e.Q6J("ngForOf",i.status),e.xp6(1),e.Q6J("ngIf",i.locationsForm.controls.status.invalid&&i.locationsForm.controls.status.touched),e.xp6(1),e.Q6J("disabled",i.locationsForm.invalid))},dependencies:[m.sg,m.O5,d.rH,d.yS,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,p.w9,p.jq]}),n})();function K(n,a){1&n&&(e.TgZ(0,"div",12)(1,"button",13),e._UZ(2,"span",14),e._uU(3," Loading... "),e.qZA()())}function G(n,a){1&n&&(e.TgZ(0,"div",37),e._uU(1," Kh\xf4ng \u0111\u1ec3 tr\u1ed1ng t\xean chi nh\xe1nh "),e.qZA())}function $(n,a){1&n&&(e.TgZ(0,"div",37),e._uU(1," Kh\xf4ng \u0111\u1ec3 tr\u1ed1ng S\u1ed1 \u0111i\u1ec7n tho\u1ea1i "),e.qZA())}function P(n,a){if(1&n&&(e.TgZ(0,"ng-option",38),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function W(n,a){if(1&n&&(e.TgZ(0,"ng-option",38),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function k(n,a){if(1&n&&(e.TgZ(0,"ng-option",38),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function V(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",16)(2,"label",21),e._uU(3," Ch\u1ecdn X\xe3 "),e.qZA(),e.TgZ(4,"ng-select",39),e.YNc(5,k,2,2,"ng-option",28),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("searchable",!0),e.xp6(1),e.Q6J("ngForOf",t.wards)}}function X(n,a){1&n&&(e.TgZ(0,"div",37),e._uU(1," Kh\xf4ng \u0111\u1ec3 tr\u1ed1ng t\xean \u0111\u1ecba ch\u1ec9 chi ti\u1ebft "),e.qZA())}function z(n,a){if(1&n&&(e.TgZ(0,"ng-option",38),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function R(n,a){1&n&&(e.TgZ(0,"div",37),e._uU(1," Kh\xf4ng \u0111\u1ec3 tr\u1ed1ng lo\u1ea1i chi nh\xe1nh "),e.qZA())}function ee(n,a){if(1&n&&(e.TgZ(0,"ng-option",38),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function te(n,a){1&n&&(e.TgZ(0,"div",37),e._uU(1," Kh\xf4ng \u0111\u1ec3 tr\u1ed1ng tr\u1ea1ng th\xe1i chi nh\xe1nh "),e.qZA())}function ne(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"form",15),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onSubmit())}),e.TgZ(1,"div",16)(2,"div",17),e._UZ(3,"img",18),e.TgZ(4,"div")(5,"label",19),e._uU(6,"\u1ea2nh \u0111\u1ea1i di\u1ec7n chi nh\xe1nh"),e.qZA(),e.TgZ(7,"input",20),e.NdJ("change",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.onFileChange(o))}),e.qZA()()()(),e.TgZ(8,"div",16)(9,"label",21),e._uU(10," T\xean Chi Nh\xe1nh "),e.TgZ(11,"span",22),e._uU(12,"(*)"),e.qZA()(),e._UZ(13,"input",23),e.YNc(14,G,2,0,"div",24),e.qZA(),e.TgZ(15,"div",16)(16,"label",21),e._uU(17," Email "),e.qZA(),e._UZ(18,"input",25),e.qZA(),e.TgZ(19,"div",16)(20,"label",21),e._uU(21," S\u1ed1 \u0111i\u1ec7n tho\u1ea1i "),e.TgZ(22,"span",22),e._uU(23,"(*)"),e.qZA()(),e._UZ(24,"input",26),e.YNc(25,$,2,0,"div",24),e.qZA(),e.TgZ(26,"div",16)(27,"label",21),e._uU(28," T\u1ec9nh th\xe0nh ph\u1ed1 "),e.qZA(),e.TgZ(29,"ng-select",27),e.NdJ("change",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onProvinceChange())}),e.YNc(30,P,2,2,"ng-option",28),e.qZA()(),e.TgZ(31,"div",16)(32,"label",21),e._uU(33," Ch\u1ecdn Huy\u1ec7n "),e.qZA(),e.TgZ(34,"ng-select",29),e.NdJ("change",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onDistrictChange())}),e.YNc(35,W,2,2,"ng-option",28),e.qZA()(),e.YNc(36,V,6,2,"div",30),e.TgZ(37,"div",16)(38,"label",21),e._uU(39," \u0110\u1ecba ch\u1ec9 chi ti\u1ebft "),e.qZA(),e.TgZ(40,"span",22),e._uU(41,"(*)"),e.qZA(),e._UZ(42,"textarea",31),e.YNc(43,X,2,0,"div",24),e.qZA(),e.TgZ(44,"div",16)(45,"label",21),e._uU(46," M\xf4 t\u1ea3 ng\u1eafn "),e.qZA(),e._UZ(47,"textarea",32),e.qZA(),e.TgZ(48,"div",16)(49,"label",21),e._uU(50," Lo\u1ea1i chi nh\xe1nh "),e.qZA(),e.TgZ(51,"span",22),e._uU(52,"(*)"),e.qZA(),e.TgZ(53,"ng-select",33),e.YNc(54,z,2,2,"ng-option",28),e.qZA(),e.YNc(55,R,2,0,"div",24),e.qZA(),e.TgZ(56,"div",16)(57,"label",21),e._uU(58," Tr\u1ea1ng th\xe1i "),e.qZA(),e.TgZ(59,"span",22),e._uU(60,"(*)"),e.qZA(),e.TgZ(61,"ng-select",34),e.YNc(62,ee,2,2,"ng-option",28),e.qZA(),e.YNc(63,te,2,0,"div",24),e.qZA(),e.TgZ(64,"button",35),e._uU(65," C\u1eadp nh\u1eadt "),e.qZA(),e.TgZ(66,"button",36),e._uU(67," Tr\u1edf v\u1ec1 "),e.qZA()()}if(2&n){const t=e.oxw();e.Q6J("formGroup",t.locationsForm),e.xp6(14),e.Q6J("ngIf",t.locationsForm.controls.name.invalid&&t.locationsForm.controls.name.touched),e.xp6(11),e.Q6J("ngIf",t.locationsForm.controls.tel.invalid&&t.locationsForm.controls.tel.touched),e.xp6(4),e.Q6J("searchable",!0),e.xp6(1),e.Q6J("ngForOf",t.provinces),e.xp6(4),e.Q6J("searchable",!0),e.xp6(1),e.Q6J("ngForOf",t.districts),e.xp6(1),e.Q6J("ngIf",t.isWardDataLoaded),e.xp6(7),e.Q6J("ngIf",t.locationsForm.controls.address_detail.invalid&&t.locationsForm.controls.address_detail.touched),e.xp6(10),e.Q6J("searchable",!0),e.xp6(1),e.Q6J("ngForOf",t.is_main),e.xp6(1),e.Q6J("ngIf",t.locationsForm.controls.is_main.invalid&&t.locationsForm.controls.is_main.touched),e.xp6(6),e.Q6J("searchable",!0),e.xp6(1),e.Q6J("ngForOf",t.status),e.xp6(1),e.Q6J("ngIf",t.locationsForm.controls.status.invalid&&t.locationsForm.controls.status.touched),e.xp6(1),e.Q6J("disabled",t.locationsForm.invalid)}}let ie=(()=>{class n{constructor(t,i,o,s,u){this._locaService=t,this.AresService=i,this.router=o,this.route=s,this.configService=u,this.isLoading=!1,this.status=[],this.is_main=[],this.provinceChangeSubject=new _.x,this.districtChangeSubject=new _.x,this.provinces=[],this.districts=[],this.wards=[],this.isWardDataLoaded=!1,this.locationsForm=new r.cw({name:new r.NI("",[r.kI.required]),email:new r.NI(""),imageUpdate:new r.NI(""),description:new r.NI(""),tel:new r.NI("",[r.kI.required]),province_code:new r.NI(""),district_code:new r.NI(""),ward_code:new r.NI(""),address_detail:new r.NI("",[r.kI.required]),status:new r.NI("",[r.kI.required]),is_main:new r.NI("",[r.kI.required])}),this.domain_name=this.configService.domain_name}ngOnInit(){this.status=[{id:0,name:"\u0110\xf3ng c\u1eeda"},{id:1,name:"Ho\u1ea1t \u0111\u1ed9ng"}],this.is_main=[{id:0,name:"Chi nh\xe1nh m\u1eb7c \u0111\u1ecbnh"},{id:1,name:"Chi nh\xe1nh ph\u1ee5"}],this.AresService.getProvinces().subscribe(t=>{this.provinces="error"!=t.status?t.results:[{id:0,name:`${t.message}`}]}),this.provinceChangeSubject.pipe((0,g.b)(300),(0,f.w)(t=>this.AresService.getDistricts(t))).subscribe(t=>{this.districts="error"!=t.status?t.results:[{id:0,name:`${t.message}`}]}),this.districtChangeSubject.pipe((0,g.b)(300),(0,f.w)(t=>this.AresService.getWards(t))).subscribe(t=>{this.wards="error"!=t.status?t.results:{id:0,name:`${t.message}`,status:!1},this.isWardDataLoaded="error"!=t.status,this.wards&&0!=this.wards.status?(this.locationsForm?.get("ward_code")?.setValidators(r.kI.required),this.locationsForm?.get("ward_code")?.updateValueAndValidity()):(console.log(this.wards),this.locationsForm.value.ward_code="")}),this.route.paramMap.subscribe(t=>{const i=t.get("id");null!==i?(this.id=i,this.isLoading=!0,this._locaService.GetOneRecord(i).subscribe(o=>{const s=o.payload;console.log(s),s.is_main=1==s.is_main?1:0,s.status=1==s.status?1:0,this.locationsForm.patchValue(s),this.onProvinceChange(),this.onDistrictChange(),this.isLoading=!1},o=>{c().fire("L\u1ed7i!","C\xf3 l\u1ed7i x\u1ea3y ra khi g\u1eedi d\u1eef li\u1ec7u.","error")})):this.router.navigate(["../locations/list"])})}onProvinceChange(){this.provinceChangeSubject.next(Number(this.locationsForm.value.province_code))}onDistrictChange(){this.districtChangeSubject.next(Number(this.locationsForm.value.district_code))}onFileChange(t){const i=t.target.files;if(i&&i.length>0){const o=i[0];if(!["image/jpeg","image/png","image/gif"].includes(o.type))return void c().fire({icon:"error",title:"L\u1ed7i!",text:"Lo\u1ea1i t\u1ec7p kh\xf4ng h\u1ee3p l\u1ec7. Ch\u1ec9 ch\u1ea5p nh\u1eadn c\xe1c t\u1ec7p JPG, PNG ho\u1eb7c GIF."}).then(()=>{t.target.value=""});if(o.size>5242880)return void c().fire({icon:"error",title:"L\u1ed7i!",text:"K\xedch th\u01b0\u1edbc t\u1ec7p qu\xe1 l\u1edbn. Vui l\xf2ng ch\u1ecdn m\u1ed9t t\u1ec7p nh\u1ecf h\u01a1n 5MB."}).then(()=>{t.target.value=""});this.img=o,console.log("T\u1ec7p h\xecnh \u1ea3nh h\u1ee3p l\u1ec7.")}else c().fire({icon:"error",title:"L\u1ed7i!",text:"Kh\xf4ng c\xf3 t\u1ec7p n\xe0o \u0111\u01b0\u1ee3c ch\u1ecdn."}).then(()=>{t.target.value=""})}onSubmit(){if(this.locationsForm.value.imageUpdate?console.log("Gi\xe1 tr\u1ecb t\u1ed3n t\u1ea1i:",this.locationsForm.value.imageUpdate):console.log("Gi\xe1 tr\u1ecb kh\xf4ng t\u1ed3n t\u1ea1i ho\u1eb7c l\xe0 null/undefined."),this.locationsForm.valid){console.log(this.locationsForm.value);const t=new FormData,i=this.locationsForm.value;t.append("domain_name",String(this.domain_name)),t.append("id",String(this.id)),this.locationsForm.value.imageUpdate&&t.append("image",this.img),t.append("name",String(i.name)),t.append("email",String(i.email)),t.append("tel",String(i.tel)),t.append("status",String(i.status)),t.append("is_main",String(i.is_main)),t.append("address_detail",String(i.address_detail)),t.append("created_by","1"),t.append("province_code",String(i.province_code)),t.append("district_code",String(i.district_code)),t.append("ward_code",String(i.ward_code)),t.append("description",String(i.description)),this._locaService.updateFormData(t).subscribe(o=>{if(1==o.status)this.locationsForm.reset(),this.showSuccessMessage("locations");else{console.log(o);const s=[];for(const u in o.meta){const h=o.meta[u];for(const E of h)s.push(`${E}`)}this.showNextMessage(s)}},o=>{console.log(o),c().fire("L\u1ed7i!","C\xf3 l\u1ed7i x\u1ea3y ra khi g\u1eedi d\u1eef li\u1ec7u.","error")})}else alert("Kh\xf4ng \u0111\u1ec3 tr\u1ed1ng")}showNextMessage(t){if(t.length>0){const i=t.shift();c().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,title:"Th\u1ea5t b\u1ea1i!",text:i,icon:"error",timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",c().stopTimer),o.addEventListener("mouseleave",c().resumeTimer)},didClose:()=>{this.showNextMessage(t)}})}}showSuccessMessage(t){c().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,title:"Th\xe0nh c\xf4ng!",text:"C\u1eadp nh\u1eadt th\xe0nh c\xf4ng",icon:"success",timerProgressBar:!0,didOpen:i=>{i.addEventListener("mouseenter",c().stopTimer),i.addEventListener("mouseleave",c().resumeTimer)}}),this.router.navigate([`../${t}/list`])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(C._),e.Y36(T.M),e.Y36(d.F0),e.Y36(d.gz),e.Y36(b.E))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-edit"]],decls:15,vars:2,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","grid-margin","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title"],["class","loadingcustomcss",4,"ngIf"],["class","forms-sample","enctype","multipart/form-data",3,"formGroup","ngSubmit",4,"ngIf"],[1,"loadingcustomcss"],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-grow","spinner-grow-sm"],["enctype","multipart/form-data",1,"forms-sample",3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"d-flex","align-items-start"],["src","#","alt","...",1,"wd-100","wd-sm-200","me-3"],["for","formFile",1,"form-label"],["type","file","id","formFile","formControlName","imageUpdate",1,"form-control",3,"change"],["for","exampleInputUsername1",1,"form-label"],[1,"text-danger"],["type","text","id","exampleInputUsername1","formControlName","name","autocomplete","off","placeholder","Nh\u1eadp t\xean chi nh\xe1nh",1,"form-control"],["class","alert alert-danger mt-2",4,"ngIf"],["type","email","id","exampleInputUsername1","formControlName","email","autocomplete","off","placeholder","Nh\u1eadp email",1,"form-control"],["type","text","id","exampleInputUsername1","formControlName","tel","autocomplete","off","placeholder","Nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i",1,"form-control"],["formControlName","province_code","placeholder","Ch\u1ecdn T\u1ec9nh",3,"searchable","change"],[3,"value",4,"ngFor","ngForOf"],["formControlName","district_code","placeholder","Ch\u1ecdn T\u1ec9nh",3,"searchable","change"],[4,"ngIf"],["id","exampleFormControlTextarea1","placeholder","Nh\u1eadp \u0111\u1ecba ch\u1ec9","formControlName","address_detail","rows","5",1,"form-control"],["id","exampleFormControlTextarea1","placeholder","Nh\u1eadp m\xf4 t\u1ea3","formControlName","description","rows","5",1,"form-control"],["formControlName","is_main","placeholder","Ch\u1ecdn chi nh\xe1nh",3,"searchable"],["formControlName","status","placeholder","Ch\u1ecdn Tr\u1ea1ng th\xe1i",3,"searchable"],["type","submit",1,"btn","btn-primary","me-2",3,"disabled"],["routerLink","/locations/list",1,"btn","btn-secondary"],[1,"alert","alert-danger","mt-2"],[3,"value"],["formControlName","ward_code","placeholder","Ch\u1ecdn X\xe3",3,"searchable"]],template:function(t,i){1&t&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._uU(4,"Danh m\u1ee5c"),e.qZA()(),e.TgZ(5,"li",4),e._uU(6," Ch\u1ec9nh s\u1eeda chi nh\xe1nh "),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"h6",9),e._uU(12,"Ch\u1ec9nh s\u1eeda Chi nh\xe1nh"),e.qZA(),e.YNc(13,K,4,0,"div",10),e.YNc(14,ne,68,16,"form",11),e.qZA()()()()),2&t&&(e.xp6(13),e.Q6J("ngIf",i.isLoading),e.xp6(1),e.Q6J("ngIf",!i.isLoading))},dependencies:[m.sg,m.O5,d.rH,d.yS,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,p.w9,p.jq]}),n})();var v=l(2366),oe=l(9751),ae=l(9646);function re(n,a){1&n&&(e.TgZ(0,"div",14)(1,"div",15)(2,"span",16),e._uU(3,"Loading..."),e.qZA()()())}const se=function(n){return["../edit",n]};function ce(n,a){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td")(12,"a",19),e._uU(13,"S\u1eeda"),e.qZA(),e.TgZ(14,"button",20),e._uU(15,"X\xf3a"),e.qZA()()()),2&n){const t=a.$implicit;e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.tel),e.xp6(2),e.Oqu(t.email),e.xp6(2),e.Oqu(t.address_detail),e.xp6(2),e.Q6J("routerLink",e.VKq(7,se,t.id)),e.xp6(2),e.s9C("id",t.id)}}function le(n,a){if(1&n&&(e.TgZ(0,"table",17)(1,"thead")(2,"tr")(3,"th"),e._uU(4,"ID"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"T\xcaN CHI NH\xc1NH"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"S\u1ed0 \u0110I\u1ec6N THO\u1ea0I"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"EMAIL"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"\u0110\u1ecaA CH\u1ec8"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"H\xc0NH \u0110\u1ed8NG"),e.qZA()()(),e.TgZ(15,"tbody"),e.YNc(16,ce,16,9,"tr",18),e.ALo(17,"async"),e.qZA(),e.TgZ(18,"tfoot")(19,"tr"),e._UZ(20,"th")(21,"th")(22,"th")(23,"th")(24,"th")(25,"th"),e.qZA()()()),2&n){const t=e.oxw();e.xp6(16),e.Q6J("ngForOf",e.lcZ(17,1,t.listLocations))}}const ue=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-locations"]],decls:1,vars:0,template:function(t,i){1&t&&e._UZ(0,"router-outlet")},dependencies:[d.lC],encapsulation:2}),n})(),children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:(()=>{class n{constructor(t){this._locaService=t,this.isLoading=!1,this.listLocations=new oe.y}ngOnInit(){this.refreshData()}ngAfterViewInit(){this.listLocations.subscribe(()=>{setTimeout(()=>{new v.w("#dataTableExample"),setTimeout(()=>{new v.w("#dataTableExample").on("datatable.init",()=>{this.addDeleteEventHandlers()})},0)},0)})}addDeleteEventHandlers(){const t=document.getElementsByClassName("btn-danger");Array.from(t).forEach(i=>{i.addEventListener("click",o=>{const s=o.target.getAttribute("id");this.deleteLocation(Number(s))})})}deleteLocation(t){c().fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a?",text:"B\u1ea1n s\u1ebd kh\xf4ng th\u1ec3 ho\xe0n t\xe1c l\u1ea1i h\xe0nh \u0111\u1ed9ng n\xe0y!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"C\xf3, x\xf3a n\xf3!"}).then(i=>{i.isConfirmed&&this._locaService.delete(t).subscribe(o=>{c().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1e3,title:"\u0110\xe3 x\xf3a!",text:"\u0110\u01a1n v\u1ecb \u0111\xe3 \u0111\u01b0\u1ee3c x\xf3a.",icon:"success",timerProgressBar:!0,didOpen:s=>{s.addEventListener("mouseenter",c().stopTimer),s.addEventListener("mouseleave",c().resumeTimer)}}),setTimeout(()=>{location.reload()},1e3)},o=>{0==o.success&&c().fire("L\u1ed7i!",`${o.meta.name}`,"error")})})}refreshData(){this.isLoading=!0,this._locaService.GetData().subscribe({next:t=>{1==t.status&&(this.listLocations=(0,ae.of)(t.payload),this.isLoading=!1,this.listLocations.subscribe(i=>{setTimeout(()=>{new v.w("#dataTableExample").on("datatable.init",()=>{this.addDeleteEventHandlers()})},0)}))},error:t=>{console.log(t),c().fire("L\u1ed7i!","C\xf3 l\u1ed7i x\u1ea3y ra. Vui l\xf2ng li\xean h\u1ec7 QTV.","error")}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(C._))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-list"]],decls:18,vars:2,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title"],["routerLink","/locations/create","type","button",1,"btn","btn-primary"],[1,"table-responsive"],["class","d-flex justify-content-center",4,"ngIf"],["id","dataTableExample","class","table",4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"visually-hidden"],["id","dataTableExample",1,"table"],[4,"ngFor","ngForOf"],[1,"btn","btn-success","mx-2",3,"routerLink"],[1,"btn","btn-danger",3,"id"]],template:function(t,i){1&t&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._uU(4,"Danh m\u1ee5c"),e.qZA()(),e.TgZ(5,"li",4),e._uU(6,"Danh m\u1ee5c chi nh\xe1nh"),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"h6",9),e._uU(12,"Qu\u1ea3n l\xed chi nh\xe1nh"),e.qZA(),e.TgZ(13,"button",10),e._uU(14,"Th\xeam m\u1edbi"),e.qZA(),e.TgZ(15,"div",11),e.YNc(16,re,4,0,"div",12),e.YNc(17,le,26,3,"table",13),e.qZA()()()()()),2&t&&(e.xp6(16),e.Q6J("ngIf",i.isLoading),e.xp6(1),e.Q6J("ngIf",!i.isLoading))},dependencies:[m.sg,m.O5,d.rH,d.yS,m.Ov]}),n})()},{path:"edit/:id",component:ie},{path:"create",component:H}]}];let de=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[m.ez,d.Bz.forChild(ue),A.xD,x.L,F.dD,N.bB,U.bQ.forRoot({animation:150,ghostClass:"bg-light"}),q.ii.forRoot(),r.UX,p.A0,r.u5,w.yI.forRoot({validation:!0})]}),n})()}}]);