"use strict";(self.webpackChunknobleui_angular=self.webpackChunknobleui_angular||[]).push([[838],{2838:(Ot,M,m)=>{m.r(M),m.d(M,{ShopModule:()=>Dt});var D=m(6895),I=m(5226),l=m.n(I),A=m(2340),t=m(4650),v=m(2997),w=m(1697),J=m(3610),k=m(529),U=m(7447);let H=(()=>{class s{constructor(e,i){this.http=e,this.configService=i,this.apiUrlProducts=A.N.apiTennatv1}getProducts(){return this.http.post(`${this.apiUrlProducts}get-product`,{domain_name:this.configService.domain_name,location:this.configService.location_id})}}return s.\u0275fac=function(e){return new(e||s)(t.LFG(k.eN),t.LFG(U.E))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var K=m(1446),F=m(1619),G=m(7074),L=m(5297);let Q=(()=>{class s{openWindow(e,i,n,a){const o=(window.innerWidth-n)/2,u=(window.innerHeight-a)/2,d=window.open(e,i,`width=${n},height=${a},left=${o},top=${u}`);return d?(d.focus(),d):null}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var B=m(433),E=m(8796);const $=["printf"];function R(s,r){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"td",56),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,a=t.oxw(),o=t.MAs(97);return t.KtG(a.openLgModalBatches(o,n.id))}),t._UZ(2,"i",57),t.qZA(),t.BQk()}}function Y(s,r){1&s&&t._UZ(0,"td",20)}function W(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"tr")(1,"td",44)(2,"div",45),t._UZ(3,"img",46),t.qZA(),t.TgZ(4,"div",47)(5,"h6"),t._uU(6),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.qZA()()(),t.TgZ(9,"td",20),t._uU(10),t.qZA(),t.TgZ(11,"td")(12,"div",44)(13,"button",48),t.NdJ("click",function(){const a=t.CHM(e).$implicit,o=t.oxw();return t.KtG(o.decreaseQuantity(a.id))}),t._uU(14,"-"),t.qZA(),t.TgZ(15,"input",49),t.NdJ("input",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.resultTotal(n))}),t.qZA(),t.TgZ(16,"button",48),t.NdJ("click",function(){const a=t.CHM(e).$implicit,o=t.oxw();return t.KtG(o.increaseQuantity(a.id))}),t._uU(17,"+"),t.qZA()()(),t.TgZ(18,"td",20)(19,"div",44)(20,"input",50),t.NdJ("input",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.resultTotal(n))})("click",function(){const n=t.CHM(e),a=n.$implicit,o=n.index,u=t.oxw(),c=t.MAs(99);return t.KtG(u.openBasicModalPrice(c,a.id,o))}),t.qZA()()(),t.TgZ(21,"td",51),t._uU(22),t.ALo(23,"currency"),t.qZA(),t.YNc(24,R,3,0,"ng-container",52),t.YNc(25,Y,1,0,"ng-template",null,53,t.W1O),t.TgZ(27,"td",54)(28,"i",55),t.NdJ("click",function(){const a=t.CHM(e).index,o=t.oxw();return t.KtG(o.removeItemCart(a))}),t.qZA()()()}if(2&s){const e=r.$implicit,i=t.MAs(26);t.xp6(6),t.Oqu(e.display_name),t.xp6(2),t.Oqu(e.sku),t.xp6(2),t.Oqu(null==e.product.item_unit?"Ch\u01b0a c\xf3 \u0111\u01a1n v\u1ecb":e.product.item_unit.name),t.xp6(5),t.s9C("id","quantity-"+e.id),t.s9C("id",e.id),t.s9C("value",e.quanity),t.xp6(5),t.s9C("id",e.id),t.s9C("value",e.price_export),t.xp6(2),t.Oqu(t.xi3(23,11,e.result,"VND")),t.xp6(2),t.Q6J("ngIf",e.batchs.length>0)("ngIfElse",i)}}function j(s,r){1&s&&(t.ynx(0),t.TgZ(1,"span",73),t._uU(2,"H\u1ebft h\xe0ng"),t.qZA(),t.BQk())}function V(s,r){if(1&s&&(t.TgZ(0,"span",74),t._uU(1),t.qZA()),2&s){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" SL: ",e[0].quantity,"")}}function z(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"div",62)(1,"div",63)(2,"div",64)(3,"div",65),t._UZ(4,"img",66),t.qZA(),t.TgZ(5,"div")(6,"h1",67),t._uU(7),t.qZA(),t.TgZ(8,"div")(9,"span",68),t._uU(10),t.qZA(),t.TgZ(11,"span",69),t.YNc(12,j,3,0,"ng-container",52),t.YNc(13,V,2,1,"ng-template",null,70,t.W1O),t.qZA()()()(),t.TgZ(15,"div",71)(16,"i",72),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,a=t.oxw(2),o=t.MAs(104);return t.KtG(a.openBasicModalVerison(o,n))}),t.qZA()()()()}if(2&s){const e=t.MAs(14),i=t.oxw().$implicit;t.xp6(7),t.Oqu(i[0].product.name),t.xp6(3),t.hij("",i[0].price_export,"\u20ab"),t.xp6(2),t.Q6J("ngIf",0===i[0].quantity)("ngIfElse",e)}}function X(s,r){1&s&&(t.ynx(0),t.TgZ(1,"span",73),t._uU(2,"H\u1ebft h\xe0ng"),t.qZA(),t.BQk())}function tt(s,r){if(1&s&&(t.TgZ(0,"span",74),t._uU(1),t.qZA()),2&s){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" SL: ",e[0].quantity,"")}}function et(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"div",75)(1,"div",63)(2,"div",64)(3,"div",65),t._UZ(4,"img",66),t.qZA(),t.TgZ(5,"div")(6,"h1",76),t._uU(7),t.qZA(),t.TgZ(8,"div")(9,"span",77),t._uU(10),t.qZA(),t.TgZ(11,"span",69),t.YNc(12,X,3,0,"ng-container",52),t.YNc(13,tt,2,1,"ng-template",null,70,t.W1O),t.qZA()()()(),t.TgZ(15,"div",71)(16,"i",72),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,a=t.oxw(2);return t.KtG(n[0].quantity>0?a.addProduct(n[0]):a.addProductQuality(n[0]))}),t.qZA()()()()}if(2&s){const e=t.MAs(14),i=t.oxw().$implicit;t.xp6(7),t.Oqu(i[0].product.name),t.xp6(3),t.hij("",i[0].price_export,"\u20ab"),t.xp6(2),t.Q6J("ngIf",0===i[0].quantity)("ngIfElse",e)}}function it(s,r){if(1&s&&(t.TgZ(0,"div",59),t.YNc(1,z,17,4,"div",60),t.YNc(2,et,17,4,"ng-template",null,61,t.W1O),t.qZA()),2&s){const e=r.$implicit,i=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.length>1)("ngIfElse",i)}}function nt(s,r){if(1&s&&(t.TgZ(0,"div",0),t.YNc(1,it,4,2,"div",58),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.ListProducts)}}function at(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"tr")(1,"th",20),t._uU(2),t.qZA(),t.TgZ(3,"td",20),t._uU(4),t.qZA(),t.TgZ(5,"td",20),t._uU(6),t.qZA(),t.TgZ(7,"td")(8,"div",44)(9,"button",48),t.NdJ("click",function(){const a=t.CHM(e).$implicit,o=t.oxw(2);return t.KtG(o.decreaseQuantityBatches(a.id))}),t._uU(10,"-"),t.qZA(),t.TgZ(11,"input",49),t.NdJ("input",function(n){t.CHM(e);const a=t.oxw(2);return t.KtG(a.resultTotalBatches(n))}),t.qZA(),t.TgZ(12,"button",48),t.NdJ("click",function(){const a=t.CHM(e).$implicit,o=t.oxw(2);return t.KtG(o.increaseQuantityBatches(a.id))}),t._uU(13,"+"),t.qZA()()(),t.TgZ(14,"td",20)(15,"i",87),t.NdJ("click",function(){const a=t.CHM(e).$implicit,o=t.oxw(2);return t.KtG(o.removeBatches(a.id))}),t.qZA()()()}if(2&s){const e=r.$implicit;t.xp6(2),t.Oqu(e.code),t.xp6(2),t.Oqu(e.expiration_date),t.xp6(2),t.Oqu(e.quality),t.xp6(5),t.s9C("id",e.id),t.s9C("value",e.payQuality),t.Q6J("id","quantityBatches-"+e.id)}}function ot(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"div",78)(1,"h5",79),t._uU(2,"Ch\u1ecdn l\xf4 HSD"),t.qZA(),t.TgZ(3,"button",80),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close(!1))}),t.qZA()(),t.TgZ(4,"div",81)(5,"ng-select",82),t.NdJ("change",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.updateBatches(n.idbatches))})("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.selectedPeopleBatches=n)}),t.qZA(),t.TgZ(6,"table",83)(7,"thead")(8,"tr")(9,"th"),t._uU(10,"M\xe3 l\xf4"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"H\u1ea1n s\u1eed d\u1ee5ng"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"T\u1ed3n kho"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"S\u1ed1 l\u01b0\u1ee3ng b\xe1n"),t.qZA(),t._UZ(17,"th"),t.qZA()(),t.TgZ(18,"tbody"),t.YNc(19,at,16,6,"tr",7),t.qZA()()(),t.TgZ(20,"div",84)(21,"button",85),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close(!1))}),t._uU(22,"Tho\xe1t"),t.qZA(),t.TgZ(23,"button",86),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close(!0))}),t._uU(24,"\xc1p d\u1ee5ng"),t.qZA()()}if(2&s){const e=t.oxw();t.xp6(5),t.Q6J("items",e.batchesData)("multiple",!0)("closeOnSelect",!1)("searchable",!1)("ngModel",e.selectedPeopleBatches),t.xp6(14),t.Q6J("ngForOf",e.selectedPeopleBatches)}}function st(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"div",78)(1,"h5",79),t._uU(2,"\u0110i\u1ec1u ch\u1ec9nh gi\xe1 s\u1ea3n ph\u1ea9m"),t.qZA(),t.TgZ(3,"button",80),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close(!1))}),t.qZA()(),t.TgZ(4,"div",81)(5,"div",88)(6,"label",89),t._uU(7,"\u0110\u01a1n gi\xe1"),t.qZA(),t.TgZ(8,"input",90),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.priceFormModal=n)}),t.qZA()(),t.TgZ(9,"div",88)(10,"label",91),t._uU(11,"Chi\u1ebft kh\u1ea5u"),t.qZA(),t.TgZ(12,"div",92)(13,"input",93),t.NdJ("input",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.limitInput(n))})("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.discount=n)}),t.qZA(),t.TgZ(14,"div",94)(15,"input",95),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.modelRadio=n)})("change",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.statusTotal())}),t.qZA(),t.TgZ(16,"label",96),t._uU(17,"\u0111"),t.qZA(),t.TgZ(18,"input",97),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.modelRadio=n)})("change",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.statusTotal())}),t.qZA(),t.TgZ(19,"label",98),t._uU(20,"%"),t.qZA()()()(),t.TgZ(21,"div",88)(22,"label",99),t._uU(23,"Thu\u1ebf(%)"),t.qZA(),t.TgZ(24,"input",100),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.tax=n)})("input",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.limitInputTax(n))}),t.qZA()()(),t.TgZ(25,"div",84)(26,"button",85),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close(!1))}),t._uU(27,"Tho\xe1t"),t.qZA(),t.TgZ(28,"button",86),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close(!0))}),t._uU(29,"\xc1p d\u1ee5ng"),t.qZA()()}if(2&s){const e=t.oxw();t.xp6(8),t.s9C("value",e.currentPrice),t.Q6J("ngModel",e.priceFormModal),t.xp6(5),t.Q6J("ngModel",e.discount),t.xp6(2),t.Q6J("ngModel",e.modelRadio)("value",0),t.xp6(3),t.Q6J("ngModel",e.modelRadio)("value",1),t.xp6(6),t.Q6J("ngModel",e.tax)}}function lt(s,r){if(1&s&&(t.TgZ(0,"p",101),t._uU(1),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.Oqu(e.basicModalCloseResult)}}function rt(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"div",78)(1,"h5",79),t._uU(2,"Th\xeam m\u1edbi kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(3,"button",80),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close(!1))}),t.qZA()(),t.TgZ(4,"div",81)(5,"div",88)(6,"label",102),t._uU(7,"H\u1ecd v\xe0 t\xean "),t.TgZ(8,"span",103),t._uU(9,"*"),t.qZA()(),t.TgZ(10,"input",104),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.dataAdd.name=n)}),t.qZA()(),t.TgZ(11,"div",88)(12,"label",105),t._uU(13,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i "),t.TgZ(14,"span",103),t._uU(15,"*"),t.qZA()(),t.TgZ(16,"input",106),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.dataAdd.tel=n)}),t.qZA()()(),t.TgZ(17,"div",84)(18,"button",85),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close(!1))}),t._uU(19,"H\u1ee7y"),t.qZA(),t.TgZ(20,"button",86),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close(!0))}),t._uU(21,"Ho\xe0n T\u1ea5t"),t.qZA()()}if(2&s){const e=t.oxw();t.xp6(10),t.Q6J("ngModel",e.dataAdd.name),t.xp6(6),t.Q6J("ngModel",e.dataAdd.tel)}}function ct(s,r){1&s&&(t.ynx(0),t.TgZ(1,"div",47)(2,"span",73),t._uU(3,"H\u1ebft h\xe0ng"),t.qZA()(),t.BQk())}function ut(s,r){if(1&s&&(t.TgZ(0,"div",112),t._uU(1),t.ALo(2,"currency"),t.qZA(),t.TgZ(3,"div",47)(4,"span",113),t._uU(5),t.qZA()()),2&s){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.xi3(2,2,e.price_export,"VND")," "),t.xp6(4),t.hij("SL: ",e.quantity,"")}}function dt(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"tr",108)(1,"td",109)(2,"div",45),t._UZ(3,"img",46),t.qZA(),t.TgZ(4,"div",47)(5,"h6"),t._uU(6),t.qZA()()(),t.TgZ(7,"div",64)(8,"td",110),t.YNc(9,ct,4,0,"ng-container",52),t.YNc(10,ut,6,5,"ng-template",null,70,t.W1O),t.qZA(),t.TgZ(12,"td",111)(13,"i",72),t.NdJ("click",function(){const a=t.CHM(e).$implicit,o=t.oxw(2);return t.KtG(0===a.quantity?o.addProductQuality(a):o.addProduct(a))}),t.qZA()()()()}if(2&s){const e=r.$implicit,i=t.MAs(11);t.xp6(6),t.Oqu(e.display_name),t.xp6(3),t.Q6J("ngIf",0===e.quantity)("ngIfElse",i)}}function ht(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"div",78)(1,"h5",79),t._uU(2,"Ch\u1ecdn bi\u1ebfn th\u1ec3 s\u1ea3n ph\u1ea9m"),t.qZA(),t.TgZ(3,"button",80),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close(!1))}),t.qZA()(),t.TgZ(4,"div",81)(5,"div",5)(6,"table",6)(7,"tbody"),t.YNc(8,dt,14,3,"tr",107),t.qZA()()()()}if(2&s){const e=t.oxw();t.xp6(8),t.Q6J("ngForOf",e.versionProduct)}}function pt(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"div",78)(1,"h5",79),t._uU(2,"Chi\u1ebft kh\u1ea5u \u0111\u01a1n h\xe0ng"),t.qZA(),t.TgZ(3,"button",80),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close(!1))}),t.qZA()(),t.TgZ(4,"div",81)(5,"div",88)(6,"label",91),t._uU(7,"Chi\u1ebft kh\u1ea5u"),t.qZA(),t.TgZ(8,"div",92)(9,"input",114),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.DiscountBill=n)})("change",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.resultBill(n.tabDefault))}),t.qZA(),t.TgZ(10,"div",94)(11,"input",115),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.modelRadioBill=n)}),t.qZA(),t.TgZ(12,"label",96),t._uU(13,"\u0111"),t.qZA(),t.TgZ(14,"input",116),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.modelRadioBill=n)}),t.qZA(),t.TgZ(15,"label",98),t._uU(16,"%"),t.qZA()()()()(),t.TgZ(17,"div",84)(18,"button",85),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close(!1))}),t._uU(19,"Tho\xe1t"),t.qZA(),t.TgZ(20,"button",86),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close(!0))}),t._uU(21,"Ho\xe0n T\u1ea5t"),t.qZA()()}if(2&s){const e=t.oxw();t.xp6(9),t.Q6J("ngModel",e.DiscountBill),t.xp6(2),t.Q6J("ngModel",e.modelRadioBill)("value",0),t.xp6(3),t.Q6J("ngModel",e.modelRadioBill)("value",1)}}function mt(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"div",143)(1,"div",144)(2,"div",145)(3,"p",146),t._UZ(4,"img",147),t._uU(5),t.qZA()()(),t.TgZ(6,"div",148)(7,"div",149)(8,"input",150),t.NdJ("ngModelChange",function(n){const o=t.CHM(e).$implicit;return t.KtG(o.pricePayment=n)})("input",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.changePayment())}),t.qZA(),t.TgZ(9,"button",151),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.paymentOrder(n.modelTypePay))}),t._uU(10,"Thanh to\xe1n"),t.qZA()(),t.TgZ(11,"i",152),t.NdJ("click",function(){const a=t.CHM(e).index,o=t.oxw(2);return t.KtG(o.removePayment(a))}),t.qZA()()()}if(2&s){const e=r.$implicit,i=t.oxw(2);t.xp6(4),t.s9C("src",i.iconsData[e.payment_method].icon,t.LSH),t.xp6(1),t.hij(" ",i.iconsData[e.payment_method].name,""),t.xp6(3),t.Q6J("ngModel",e.pricePayment)("disabled",1==e.status||2==e.payment_method),t.xp6(1),t.Akn(1==e.status||2==e.payment_method?"display:none":"")}}function _t(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"div",78)(1,"h5",79),t._uU(2,"Thanh to\xe1n \u0111a ph\u01b0\u01a1ng th\u1ee9c"),t.qZA(),t.TgZ(3,"button",80),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close(!1))}),t.qZA()(),t.TgZ(4,"div",81)(5,"div",117)(6,"label",91),t._uU(7,"S\u1ed1 ti\u1ec1n c\u1ea7n tr\u1ea3"),t.qZA(),t.TgZ(8,"h5",118),t._uU(9),t.ALo(10,"currency"),t.qZA()(),t._UZ(11,"hr"),t.TgZ(12,"h6",119),t._uU(13,"Th\xeam ph\u01b0\u01a1ng th\u1ee9c thanh to\xe1n"),t.qZA(),t.TgZ(14,"div",120)(15,"div",121)(16,"input",122),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.modelTypePay=n)})("change",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.changePayment(0))}),t.qZA(),t.TgZ(17,"label",123),t._UZ(18,"img",124),t._uU(19," Ti\u1ec1n m\u1eb7t"),t.qZA()(),t.TgZ(20,"div",121)(21,"input",125),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.modelTypePay=n)})("change",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.changePayment(1))}),t.qZA(),t.TgZ(22,"label",126),t._UZ(23,"img",127),t._uU(24," Chuy\u1ec3n kho\u1ea3n"),t.qZA()(),t.TgZ(25,"div",121)(26,"input",128),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.modelTypePay=n)})("change",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.changePayment(2))}),t.qZA(),t.TgZ(27,"label",129),t._UZ(28,"img",130),t._uU(29,"Ghi n\u1ee3"),t.qZA()()(),t.TgZ(30,"h6",131),t._uU(31,"Kh\xe1ch tr\u1ea3:"),t.qZA(),t.YNc(32,mt,12,6,"div",132),t.qZA(),t.TgZ(33,"div",133)(34,"table",18)(35,"tbody")(36,"tr")(37,"td",134),t._uU(38,"Kh\xe1ch ph\u1ea3i tr\u1ea3"),t.qZA(),t.TgZ(39,"td",135),t._UZ(40,"input",136),t._uU(41,"\u20ab"),t.qZA()(),t.TgZ(42,"tr")(43,"td",137),t._uU(44,"T\u1ed5ng kh\xe1ch \u0111\u01b0a"),t.qZA(),t.TgZ(45,"td",138),t._UZ(46,"input",139),t._uU(47,"\u20ab"),t.qZA()(),t.TgZ(48,"tr")(49,"td",137),t._uU(50),t.qZA(),t.TgZ(51,"td",138),t._UZ(52,"input",140),t._uU(53,"\u20ab"),t.qZA()()()(),t.TgZ(54,"div",141)(55,"button",85),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close(!1))}),t._uU(56,"Tho\xe1t"),t.qZA(),t.TgZ(57,"button",142),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close(!0))}),t._uU(58,"Ho\xe0n T\u1ea5t \u0110\u01a1n H\xe0ng"),t.qZA()()()}if(2&s){const e=t.oxw();t.xp6(9),t.Oqu(t.xi3(10,13,e.priceBill,"VND")),t.xp6(7),t.Q6J("ngModel",e.modelTypePay)("value",0),t.xp6(5),t.Q6J("ngModel",e.modelTypePay)("value",1),t.xp6(5),t.Q6J("ngModel",e.modelTypePay)("value",2),t.xp6(6),t.Q6J("ngForOf",e.dataBtnPayment[e.tabDefault]),t.xp6(8),t.s9C("value",e.priceBill),t.xp6(6),t.s9C("value",e.pricePayment),t.xp6(4),t.Oqu(e.paymentPrice>0?"C\xf2n l\u1ea1i c\u1ea7n thanh to\xe1n":"Ti\u1ec1n th\u1eeba"),t.xp6(2),t.s9C("value",e.paymentPrice>0?e.paymentPrice:e.changeBill),t.xp6(5),t.Q6J("disabled",!e.dataBtnPayment[e.tabDefault][0].status)}}function gt(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"div",78)(1,"h5",79),t._uU(2,"In h\xf3a \u0111\u01a1n"),t.qZA()(),t.TgZ(3,"div",81)(4,"h5"),t._uU(5,"Ch\u1ecdn th\xf4ng tin b\u1ea1n mu\u1ed1n in"),t.qZA(),t.TgZ(6,"div",153),t._UZ(7,"input",154),t.TgZ(8,"label",155),t._uU(9," H\xf3a \u0110\u01a1n "),t.qZA()(),t.TgZ(10,"h5"),t._uU(11,"Ch\u1ecdn m\u1eabu in"),t.qZA(),t.TgZ(12,"div",156),t._UZ(13,"input",157),t.TgZ(14,"label",155),t._uU(15," In \u0111\u1ea7y \u0111\u1ee7 "),t.qZA()()(),t.TgZ(16,"div",84)(17,"button",86),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close(!0))}),t._uU(18,"In ngay"),t.qZA()()}}let ft=(()=>{class s{constructor(e,i,n,a,o,u,c,d,f){this.modalService=e,this.DatalayoutService=i,this.CustomersService=n,this.ListProductsService=a,this.OrderService=o,this.PaymentService=u,this.DebtsService=c,this.PrintService=d,this.TabwindowsService=f,this.quantity=0,this.basicModalCloseResult="",this.modelRadio=1,this.modelTypePay=0,this.tabDefault=0,this.discount=0,this.tax=0,this.productValues={},this.singleTax=0,this.DiscountBill=0,this.taxBill=0,this.modelRadioBill=1,this.priceBill=0,this.cashPrice=0,this.paymentPrice=0,this.changeBill=0,this.people=[],this.batchesData=[],this.selectedSearchPersonId="",this.dataAdd={name:"",tel:""},this.iconsData=[{id:0,icon:"../../../../../assets/images/others/Payment_Cash.svg",name:"Ti\u1ec1n m\u1eb7t"},{id:1,icon:"../../../../../assets/images/others/Payment_Transfer.svg",name:"Chuy\u1ec3n Kho\u1ea3n"},{id:2,icon:"../../../../../assets/images/others/Debt.68ccc6d1.svg",name:"Ghi n\u1ee3"}],this.modelRadioPrintf=1,this.dataObject={}}ngOnInit(){console.log(this.ListProducts),this.PrintService.GetOneRecord("1").subscribe(e=>{this.formPrintf=e.payload}),this.ListProductsService.getProducts().subscribe(e=>{if(this.ListProducts=Object.values(e.payload),console.log(e.payload),e.payload)for(const i in e.payload)for(const n of e.payload[i])n.quantity=n.variation_quantities.reduce((a,o)=>a+o.quantity,0)}),this.DatalayoutService.currentData.subscribe(e=>{e.hasOwnProperty("tabOrder")?(this.dataCurrent=e.tabOrder,this.listProductCart=e.tabOrder.map((i,n)=>i.ListProductCart),this.dataInfoUser=e.tabOrder.map((i,n)=>i.infoOrder),Object.keys(e.tabOrder[this.tabDefault].infoOrder).length>0&&(this.selectedSearchPersonId=e.tabOrder[this.tabDefault].infoOrder.id)):(this.dataCurrent=this.dataCurrent,this.listProductCart=this.dataCurrent.map((i,n)=>i.ListProductCart),this.dataInfoUser=this.dataCurrent.map((i,n)=>i.infoOrder),Object.keys(this.dataCurrent[this.tabDefault].infoOrder).length>0&&(this.selectedSearchPersonId=this.dataCurrent[this.tabDefault].infoOrder.id)),this.totalMoney=this.listProductCart[this.tabDefault].reduce((i,n)=>i+n.result,0),this.productItemsBatches=e.dataBatches,this.tabDefault=e.tabCurrent,this.modalData=e.tabModal,this.dataBtnPayment=e.payment,this.dataBill||(this.dataBill=e.dataBill,this.priceBill=e.dataBill[this.tabDefault].totalPrice,this.singleTax=e.dataBill[this.tabDefault].discount,this.DiscountBill=e.dataBill[this.tabDefault].tax,this.taxBill=e.dataBill[this.tabDefault].service,this.modelRadioBill=e.dataBill[this.tabDefault].radio,this.cashPrice=e.dataBill[this.tabDefault].cash,this.pricePayment=e.dataBill[this.tabDefault].cash,this.changeTotalBill(),e.dataBill[this.tabDefault].note&&(this.noteBill=e.dataBill[this.tabDefault].note,this.noteBillEvent()))}),this.DatalayoutService.eventCurrent.subscribe(e=>{let i=null,n=null,a=null,o=null,u=null;switch(e.name){case"addTabOder":if(this.dataCurrent.length<4){const{modalDataAdd:_}=e.data;this.totalMoney=0,this.dataCurrent.push({ListProductCart:[],infoOrder:{}}),this.dataBill.push({discount:0,tax:0,totalPrice:0,service:0,radio:1,cash:0}),this.dataBtnPayment.push([{payment_method:0,pricePayment:0,status:!1}]),this.productItemsBatches.push([]),console.log(_),_.push([]),a=_,this.tabDefault=this.dataCurrent.length-1,u=this.productItemsBatches,i=this.dataCurrent,n=this.dataBill,o=this.dataBtnPayment,this.listProductCart=this.dataCurrent.map((g,T)=>g.ListProductCart),this.singleTax=this.dataBill[this.tabDefault].discount,this.DiscountBill=this.dataBill[this.tabDefault].tax,this.taxBill=this.dataBill[this.tabDefault].service,this.modelRadioBill=this.dataBill[this.tabDefault].radio,this.priceBill=this.dataBill[this.tabDefault].totalPrice,this.cashPrice=this.dataBill[this.tabDefault].cash,this.pricePayment=this.dataBill[this.tabDefault].cash,this.changeTotalBill(),this.dataBill[this.tabDefault].note&&(this.noteBill=this.dataBill[this.tabDefault].note,this.noteBillEvent()),this.selectedSearchPersonId=Object.keys(this.dataCurrent[this.tabDefault].infoOrder).length>0?this.dataCurrent[this.tabDefault].infoOrder.id:"",localStorage.setItem("tabOrder",JSON.stringify(this.dataCurrent)),localStorage.setItem("dataBill",JSON.stringify(this.dataBill)),localStorage.setItem("TabModal",JSON.stringify(_)),localStorage.setItem("dataPayment",JSON.stringify(this.dataBtnPayment)),localStorage.setItem("dataBatches",JSON.stringify(this.productItemsBatches)),this.DatalayoutService.changeData({tabCurrent:this.tabDefault}),localStorage.setItem("TabCurrentIndex",JSON.stringify(this.tabDefault))}else i=this.dataCurrent,n=this.dataBill,u=this.productItemsBatches,a=this.modalData,o=this.dataBtnPayment,l().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,title:"Th\u1ea5t b\u1ea1i!",text:"\u0110\u01a1n h\xe0ng \u0111\xe3 \u0111\u1ea1t gi\u1edbi h\u1ea1n vui l\xf2ng thanh to\xe1n 4 \u0111\u01a1n h\xe0ng tr\u01b0\u1edbc \u0111\xf3",icon:"error",timerProgressBar:!0,didOpen:_=>{_.addEventListener("mouseenter",l().stopTimer),_.addEventListener("mouseleave",l().resumeTimer)}});this.dataCurrent=i,this.dataBill=n,this.dataBtnPayment=o,this.productItemsBatches=u,this.modalData=a,console.log(this.dataBill);break;case"changeTab":const{id:c}=e.data;this.tabDefault=c,this.totalMoney=this.listProductCart[this.tabDefault].reduce((_,g)=>_+g.result,0),this.singleTax=this.dataBill[this.tabDefault].discount,this.DiscountBill=this.dataBill[this.tabDefault].tax,this.taxBill=this.dataBill[this.tabDefault].service,this.modelRadioBill=this.dataBill[this.tabDefault].radio,this.priceBill=this.dataBill[this.tabDefault].totalPrice,this.cashPrice=this.dataBill[this.tabDefault].cash,this.pricePayment=this.dataBill[this.tabDefault].cash,this.changeTotalBill(),this.dataBill[this.tabDefault].note?(this.noteBill=this.dataBill[this.tabDefault].note,this.noteBillEvent()):this.noteBill="",console.log(this.dataCurrent[this.tabDefault]),this.selectedSearchPersonId=Object.keys(this.dataCurrent[this.tabDefault].infoOrder).length>0?this.dataCurrent[this.tabDefault].infoOrder.id:"",localStorage.setItem("TabCurrentIndex",JSON.stringify(this.tabDefault));break;case"removeTab":const{idRemove:d,modalData:f}=e.data;d>0&&(this.dataCurrent.splice(d,1),this.dataBill.splice(d,1),this.dataBtnPayment.splice(this.tabDefault,1),f.splice(this.tabDefault,1),this.productItemsBatches.splice(this.tabDefault,1),a=f,this.tabDefault=0==d?0:d-1,this.singleTax=this.dataBill[this.tabDefault].discount,this.DiscountBill=this.dataBill[this.tabDefault].tax,this.taxBill=this.dataBill[this.tabDefault].service,this.modelRadioBill=this.dataBill[this.tabDefault].radio,this.priceBill=this.dataBill[this.tabDefault].totalPrice,i=this.dataCurrent,n=this.dataBill,o=this.dataBtnPayment,u=this.productItemsBatches,this.selectedSearchPersonId=Object.keys(this.dataCurrent[this.tabDefault].infoOrder).length>0?this.dataCurrent[this.tabDefault].infoOrder.id:"",localStorage.setItem("tabOrder",JSON.stringify(this.dataCurrent)),localStorage.setItem("dataBill",JSON.stringify(this.dataBill)),localStorage.setItem("TabModal",JSON.stringify(f)),localStorage.setItem("dataPayment",JSON.stringify(this.dataBtnPayment)),localStorage.setItem("dataBatches",JSON.stringify(this.productItemsBatches)),this.DatalayoutService.changeData({tabCurrent:this.tabDefault}),localStorage.setItem("TabCurrentIndex",JSON.stringify(this.tabDefault))),this.dataCurrent=i,this.dataBill=n,this.modalData=a,this.dataBtnPayment=o,this.productItemsBatches=u;break;default:throw new Error("Error Event component")}}),this.CustomersService.getCustomer().subscribe(e=>{this.people=e.payload,console.log(e),console.log(e),e.payload.length>0&&this.people.forEach(i=>{i.displayName=`${i.name} - ${i.tel}`})})}peopleEvent(){const e=this.people.find(i=>i.id===this.selectedSearchPersonId);this.dataPerson=e,this.updateBill(this.dataInfoUser,this.tabDefault,e),localStorage.setItem("tabOrder",JSON.stringify(this.dataCurrent))}scrollTo(e){e.scrollIntoView({behavior:"smooth"})}noteBillEvent(){this.updateBill(this.dataBill,this.tabDefault,{note:this.noteBill}),localStorage.setItem("dataBill",JSON.stringify(this.dataBill))}changeTotalBill(){this.cashPrice>this.priceBill?(this.changeBill=this.cashPrice-this.priceBill,this.paymentPrice=0):(this.changeBill=0,this.paymentPrice=this.priceBill-this.cashPrice)}resultBill(e){console.log(e),console.log(this.totalMoney,this.DiscountBill,this.totalMoney);let i=null;if(1===this.modelRadioBill){const n=this.totalMoney*Number(this.DiscountBill);i=this.totalMoney-n/100+(this.totalMoney-n/100)*this.singleTax/100+Number(this.taxBill)}else{const n=this.totalMoney-Number(this.DiscountBill);i=n+n*this.singleTax/100+Number(this.taxBill)}this.priceBill=i,this.updateBill(this.dataBill,e,{discount:this.singleTax,tax:this.DiscountBill,totalPrice:this.priceBill,service:this.taxBill,radio:this.modelRadioBill}),localStorage.setItem("dataBill",JSON.stringify(this.dataBill))}changeCash(e){e.target.value||(this.cashPrice=0,e.target.value=0,this.pricePayment=0),this.cashPrice>this.priceBill?(this.changeBill=this.cashPrice-this.priceBill,this.paymentPrice=0):(this.changeBill=0,this.paymentPrice=this.priceBill-this.cashPrice),console.log(e.target.value),this.updateBill(this.dataBill,this.tabDefault,{cash:this.cashPrice}),localStorage.setItem("dataBill",JSON.stringify(this.dataBill))}resultTotal(e){this.updateQuantity(this.listProductCart[this.tabDefault],+e.target.id,+e.target.value,e.target.name),this.totalMoney=this.listProductCart[this.tabDefault].reduce((i,n)=>i+n.result,0),localStorage.setItem("tabOrder",JSON.stringify(this.dataCurrent))}resultTotalBatches(e){this.updateQuantity(this.listProductCart[this.tabDefault],+e.target.id,+e.target.value,e.target.name),this.totalMoney=this.listProductCart[this.tabDefault].reduce((i,n)=>i+n.result,0),localStorage.setItem("tabOrder",JSON.stringify(this.dataCurrent))}openBasicModalVerison(e,i){this.versionProduct=i,this.modalService.open(e,{}).result.then(n=>{console.log(n),n&&l().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,title:"Th\xe0nh c\xf4ng!",text:"Th\xeam s\u1ea3n ph\u1ea9m th\xe0nh c\xf4ng",icon:"success",timerProgressBar:!0,didOpen:a=>{a.addEventListener("mouseenter",l().stopTimer),a.addEventListener("mouseleave",l().resumeTimer)}})}).catch(n=>{})}openBasicModal(e){this.modalService.open(e,{}).result.then(i=>{console.log(i),i&&(this.updateBill(this.dataInfoUser,this.tabDefault,this.dataAdd),console.log(this.dataCurrent),this.CustomersService.createQuickly(this.dataAdd).subscribe(n=>{if(console.log(n),n.status){this.people=n.payload,n.payload.length>0&&this.people.forEach(o=>{o.displayName=`${o.name} - ${o.tel}`});const a=n.payload.find(o=>o.name===this.dataAdd.name);this.selectedSearchPersonId=a.id,this.updateBill(this.dataInfoUser,this.tabDefault,a),localStorage.setItem("tabOrder",JSON.stringify(this.dataCurrent))}else{console.log(n);const a=[];for(const o in n.meta.errors){const u=n.meta.errors[o];for(const c of u)a.push(`${o}: ${c}`)}this.showNextMessage(a)}}),l().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,title:"Th\xe0nh c\xf4ng!",text:"\xc1p d\u1ee5ng th\xe0nh c\xf4ng",icon:"success",timerProgressBar:!0,didOpen:n=>{n.addEventListener("mouseenter",l().stopTimer),n.addEventListener("mouseleave",l().resumeTimer)}}))}).catch(i=>{})}removeItemCart(e){e>-1&&(this.listProductCart[this.tabDefault].splice(e,1),this.totalMoney=this.listProductCart[this.tabDefault].reduce((i,n)=>i+n.result,0),this.modalData[this.tabDefault].splice(e,1),console.log(this.productItemsBatches),this.productItemsBatches&&this.productItemsBatches[this.tabDefault].splice(e,1),this.resultBill(this.tabDefault),localStorage.setItem("tabOrder",JSON.stringify(this.dataCurrent)),localStorage.setItem("TabModal",JSON.stringify(this.modalData)),localStorage.setItem("dataBatches",JSON.stringify(this.productItemsBatches)))}statusTotal(){1==this.modelRadio&&(this.discount=100)}limitInput(e){console.log(this.discount,this.modelRadio),1==this.modelRadio&&this.discount>100?(e.target.value=100,this.discount=100):this.discount<0?(e.target.value=0,this.discount=0):(this.discount=this.discount>this.priceFormModal?this.priceFormModal:this.discount,e.target.value=this.discount),this.totalMoney=this.listProductCart[this.tabDefault].reduce((i,n)=>i+n.result,0)}updateBatches(e){this.productItemsBatches[this.tabDefault].find(n=>n.id===e).batches=this.selectedPeopleBatches,localStorage.setItem("dataBatches",JSON.stringify(this.productItemsBatches))}openBasicModalPrice(e,i,n){this.priceFormModal=this.modalData[this.tabDefault][n].priceCurrent,this.discount=this.modalData[this.tabDefault][n].discount,this.tax=this.modalData[this.tabDefault][n].tax,this.modelRadio=this.modalData[this.tabDefault][n].radioDiscount,this.modalService.open(e,{}).result.then(a=>{if(console.log(this.modelRadio),a){let o=null;if(1===this.modelRadio){const c=this.priceFormModal*Number(this.discount);o=this.priceFormModal-c/100+(this.priceFormModal-c/100)*this.tax/100}else{const c=this.priceFormModal-Number(this.discount);o=c+c*this.tax/100}const u={priceCurrent:+this.priceFormModal,discount:this.discount,tax:+this.tax,radioDiscount:this.modelRadio,result:o};console.log(u),console.log(this.modalData),this.updateQuantity(this.listProductCart[this.tabDefault],+i,o,"price"),this.updateModal(this.modalData[this.tabDefault],+i,u),this.totalMoney=this.listProductCart[this.tabDefault].reduce((c,d)=>c+d.result,0),this.resultBill(this.tabDefault),localStorage.setItem("tabOrder",JSON.stringify(this.dataCurrent)),localStorage.setItem("TabModal",JSON.stringify(this.modalData)),l().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,title:"Th\xe0nh c\xf4ng!",text:"\xc1p d\u1ee5ng th\xe0nh c\xf4ng",icon:"success",timerProgressBar:!0,didOpen:c=>{c.addEventListener("mouseenter",l().stopTimer),c.addEventListener("mouseleave",l().resumeTimer)}})}}).catch(a=>{})}changePayment(e=0){let i=this.dataBtnPayment[this.tabDefault][this.dataBtnPayment[this.tabDefault].length-1];console.log(i);i.status?this.pricePayment<this.priceBill&&(console.log(e),2==e?(this.dataBtnPayment[this.tabDefault].push({payment_method:2,pricePayment:this.paymentPrice,status:!0}),this.pricePayment=this.dataBtnPayment[this.tabDefault].reduce((a,o)=>a+o.pricePayment,0),this.pricePayment>this.priceBill?(this.changeBill=this.pricePayment-this.priceBill,this.paymentPrice=0):(this.changeBill=0,this.paymentPrice=this.priceBill-this.pricePayment)):this.dataBtnPayment[this.tabDefault].push({payment_method:e,pricePayment:0,status:!1})):(i.payment_method=this.modelTypePay,i.pricePayment=+i.pricePayment,console.log(this.dataBtnPayment),i.pricePayment>this.priceBill?(this.changeBill=i.pricePayment-this.priceBill,this.paymentPrice=0):(this.changeBill=0,this.paymentPrice=this.priceBill-i.pricePayment),this.pricePayment=this.dataBtnPayment[this.tabDefault].reduce((a,o)=>a+o.pricePayment,0),this.cashPrice=0==this.modelTypePay?this.pricePayment:0),localStorage.setItem("dataPayment",JSON.stringify(this.dataBtnPayment))}paymentOrder(e){this.dataBtnPayment[this.tabDefault][this.dataBtnPayment[this.tabDefault].length-1].status=!0,this.pricePayment>this.priceBill?(this.changeBill=this.pricePayment-this.priceBill,this.paymentPrice=0):(this.changeBill=0,this.paymentPrice=this.priceBill-this.pricePayment),this.updateBill(this.dataBill,this.tabDefault,{cash:this.pricePayment}),localStorage.setItem("dataPayment",JSON.stringify(this.dataBtnPayment))}addProduct(e){this.modalData=JSON.parse(localStorage.getItem("TabModal")),console.log(this.modalData);const i=this.listProductCart[this.tabDefault].find(n=>n.id===e.id);i?(i.quanity=i.quanity+1,i.result=i.quanity*i.price_export,l().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,title:"Th\xe0nh c\xf4ng!",text:"C\u1eadp nh\u1eadt s\u1ea3n ph\u1ea9m th\xe0nh c\xf4ng!",icon:"success",timerProgressBar:!0,didOpen:n=>{n.addEventListener("mouseenter",l().stopTimer),n.addEventListener("mouseleave",l().resumeTimer)}})):(console.log(e),this.listProductCart[this.tabDefault].push({...e,quanity:1,result:1*e.price_export}),this.modalData[this.tabDefault].push({id:e.id,priceCurrent:e.price_export,discount:0,tax:0,radioDiscount:1,result:e.price_export}),e.batchs.length>0?(this.productItemsBatches[this.tabDefault].push({id:e.id,batches:[]}),l().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,title:"C\u1ea3nh b\xe1o!",text:"Vui l\xf2ng ch\u1ecdn l\xf4 s\u1ea3n ph\u1ea9m",icon:"warning",timerProgressBar:!0,didOpen:n=>{n.addEventListener("mouseenter",l().stopTimer),n.addEventListener("mouseleave",l().resumeTimer)}})):l().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,title:"Th\xe0nh c\xf4ng!",text:"Th\xeam s\u1ea3n ph\u1ea9m th\xe0nh c\xf4ng",icon:"success",timerProgressBar:!0,didOpen:n=>{n.addEventListener("mouseenter",l().stopTimer),n.addEventListener("mouseleave",l().resumeTimer)}})),console.log(this.modalData),localStorage.setItem("tabOrder",JSON.stringify(this.dataCurrent)),localStorage.setItem("TabModal",JSON.stringify(this.modalData)),localStorage.setItem("dataBatches",JSON.stringify(this.productItemsBatches)),this.totalMoney=this.listProductCart[this.tabDefault].reduce((n,a)=>n+a.result,0),this.resultBill(this.tabDefault),localStorage.setItem("dataBill",JSON.stringify(this.dataBill))}addProductQuality(e){this.modalData=JSON.parse(localStorage.getItem("TabModal")),this.dataBill=JSON.parse(localStorage.getItem("dataBill")),l().fire({title:"B\xe1n v\u01b0\u1ee3t qu\xe1 s\u1ed1 t\u1ed3n kho",text:"S\u1ea3n ph\u1ea9m n\xe0y hi\u1ec7n kh\xf4ng \u0111\u1ee7 s\u1ed1 l\u01b0\u1ee3ng trong kho. B\u1ea1n v\u1eabn mu\u1ed1n b\xe1n ch\u1ee9 ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Quay l\u1ea1i",confirmButtonText:"Ti\u1ebfp t\u1ee5c b\xe1n"}).then(i=>{if(i.isConfirmed){const n=this.listProductCart[this.tabDefault].find(a=>a.id===e.id);console.log(this.listProductCart),console.log(n),n?(n.quanity=n.quanity+1,l().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,title:"Th\xe0nh c\xf4ng!",text:"C\u1eadp nh\u1eadt s\u1ea3n ph\u1ea9m th\xe0nh c\xf4ng!",icon:"success",timerProgressBar:!0,didOpen:a=>{a.addEventListener("mouseenter",l().stopTimer),a.addEventListener("mouseleave",l().resumeTimer)}})):(console.log(e.id),e.batchs.length>0&&this.productItemsBatches[this.tabDefault].push({id:e.id,batches:[]}),this.listProductCart[this.tabDefault].push({...e,quanity:1,result:1*e.price_export}),this.modalData[this.tabDefault].push({id:e.id,priceCurrent:e.price_export,discount:0,tax:0,radioDiscount:1,result:e.price_export}),console.log(this.dataCurrent),console.log(this.listProductCart),l().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,title:"Th\xe0nh c\xf4ng!",text:"Th\xeam s\u1ea3n ph\u1ea9m th\xe0nh c\xf4ng",icon:"success",timerProgressBar:!0,didOpen:a=>{a.addEventListener("mouseenter",l().stopTimer),a.addEventListener("mouseleave",l().resumeTimer)}})),localStorage.setItem("dataBatches",JSON.stringify(this.productItemsBatches)),localStorage.setItem("tabOrder",JSON.stringify(this.dataCurrent)),localStorage.setItem("TabModal",JSON.stringify(this.modalData)),this.totalMoney=this.listProductCart[this.tabDefault].reduce((a,o)=>a+o.result,0),this.resultBill(this.tabDefault)}})}openLgModalBatches(e,i){console.log(i);const n=this.listProductCart[this.tabDefault].find(o=>o.id===i);this.batchesData=n.batchs,this.idbatches=i;for(let o=0;o<this.batchesData.length;o++){let u=this.batchesData[o].id,d=n.variation_quantities.filter(f=>f.batch_id===u).reduce((f,_)=>f+_.quantity,0);this.batchesData[o].quality=d,this.batchesData[o].payQuality=1}const a=this.productItemsBatches[this.tabDefault].find(o=>o.id===i);this.selectedPeopleBatches=a.batches,console.log(a),this.modalService.open(e,{size:"lg"}).result.then(o=>{o&&(n.quanity=a.batches.reduce((u,c)=>u+c.payQuality,0),localStorage.setItem("tabOrder",JSON.stringify(this.dataCurrent)),l().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,title:"Th\xe0nh c\xf4ng!",text:"\xc1p d\u1ee5ng l\xf4 h\xe0ng th\xe0nh c\xf4ng",icon:"success",timerProgressBar:!0,didOpen:u=>{u.addEventListener("mouseenter",l().stopTimer),u.addEventListener("mouseleave",l().resumeTimer)}}))}).catch(o=>{})}openLgModal(e){const i=this.listProductCart[this.tabDefault].filter(n=>n.batchs.length>0);for(let n=0;n<i.length;n++){const a=i[n],o=this.productItemsBatches[this.tabDefault].find(u=>u.id===a.id);if(0==o.batches.length){const u=this.listProductCart[this.tabDefault].find(d=>d.id===a.id);this.batchesData=u.batchs;for(let d=0;d<this.batchesData.length;d++){let f=this.batchesData[d].id,g=u.variation_quantities.filter(T=>T.batch_id===f).reduce((T,C)=>T+C.quantity,0);this.batchesData[d].quality=g,this.batchesData[d].payQuality=1}const c=a.batchs.find(d=>d.quality>0);o.batches.push(c),localStorage.setItem("dataBatches",JSON.stringify(this.productItemsBatches))}console.log(this.dataCurrent)}console.log(this.dataBtnPayment),this.modelTypePay=this.dataBtnPayment[this.tabDefault][this.dataBtnPayment[this.tabDefault].length-1].payment_method,this.pricePayment=this.dataBtnPayment[this.tabDefault].reduce((n,a)=>n+a.pricePayment,0),this.pricePayment>this.priceBill?(this.changeBill=this.pricePayment-this.priceBill,this.paymentPrice=0):(this.changeBill=0,this.paymentPrice=this.priceBill-this.pricePayment),this.modalService.open(e,{size:"lg"}).result.then(n=>{if(n){const u={customer_id:this.selectedSearchPersonId,created_by:1,discount:this.DiscountBill,discount_type:this.modelRadioBill,tax:this.singleTax,service_charge:this.taxBill,total_product:this.listProductCart[this.tabDefault].length,total_price:this.priceBill,status:2,payment_status:1,order_details:this.listProductCart[this.tabDefault].map((g,T)=>({...g,batches_focus:this.productItemsBatches[this.tabDefault].find(C=>C.id==g.id),priceModal:this.modalData[this.tabDefault].find(C=>C.id==g.id)}))};let c,d,f,_={Ten_Cua_hang:"H\u1eadu \u0111\u1eb7ng",Ten_Chi_Nhanh:"Hoa Qu\u1ea3",Dia_Chi_Chi_Nhanh:"Nam \u0111\u1ecbnh",Dien_Thoai_Chi_Nhanh:"0353786736",Nguoi_Phu_Trach:"H\u1eadu \u0111\u1eb7ng",Ngay_Tao:(new Date).toLocaleString(),Ma_Don_Hang:null,Chiet_khau_Phien_Ban:"10%",Thue_Phien_Ban:"10%",Tong_Tien_Hang:this.priceBill,Tong_Chiet_Khau_San_Pham:"10%",Chiet_Khau_Don_Hang:this.DiscountBill,Tong_Thue:this.singleTax,Phi_Khac:0,Tong_Can_Thanh_Toan:this.priceBill,Khach_Thanh_Toan:this.pricePayment,Tien_No:this.paymentPrice,Tien_Tra:this.changeBill,Ten_Khach_Hang:"Kh\xe1ch ngo\u1ea1i lai",Dien_Thoai_Khach:"---",Listproducts:this.listProductCart[this.tabDefault].map((g,T)=>({...g,batches_focus:this.productItemsBatches[this.tabDefault].find(C=>C.id==g.id),priceModal:this.modalData[this.tabDefault].find(C=>C.id==g.id)}))};console.log(_),""!=this.selectedSearchPersonId?(console.log("\u0111\xe3 v\xe0o \u0111\xe2y"),this.OrderService.create(u,A.N.location_id).subscribe(g=>{if(console.log(g),g.status){const T=new Date,C=new Date;C.setFullYear(C.getFullYear()+1);const Mt=new Date(T),At=new Date(C),{id:P}=g.payload,{id:Et,customer_type:St,name:O,tel:qt}=this.people.find(h=>h.id===this.selectedSearchPersonId);console.log(this.people),_.Ma_Don_Hang=P,_.Ten_Khach_Hang=O,_.Dien_Thoai_Khach=qt;const y=this.dataBtnPayment[this.tabDefault].map(h=>0==h.payment_method||1==h.payment_method?{...h,paymentable_id:P,amount:this.priceBill,amount_in:this.pricePayment,amount_refund:this.changeBill,note:this.dataBill[this.tabDefault].note??"",reference_code:null,statusMap:!0}:{...h,paymentable_id:P,amount:this.priceBill,amount_in:this.pricePayment,amount_refund:this.changeBill,note:this.dataBill[this.tabDefault].note??"",reference_code:null,statusMap:!1}),N=y.filter(h=>1==h.statusMap),Z=y.find(h=>0==h.statusMap),x={partner_id:Et,partner_type:St,debit_at:Mt,due_at:At,name:O,amount_debt:this.paymentPrice,amount_paid:0,note:this.dataBill[this.tabDefault].note??"",type:0,status:1};console.log(x),0==this.tabDefault?(console.log(Z),N&&Z?(x.amount_debt=Z.pricePayment,this.DebtsService.createDebts(x).subscribe(h=>{h.status&&(l().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,title:"Th\xe0nh C\xf4ng!",text:"\u0110\xe3 \u0111\u1eb7t h\xe0ng th\xe0nh c\xf4ng!!",icon:"success",timerProgressBar:!0,didOpen:p=>{p.addEventListener("mouseenter",l().stopTimer),p.addEventListener("mouseleave",l().resumeTimer)}}),this.modalService.open(this.myModal).result.then(p=>{console.log(p),console.log(_),this.replaceKeysWithData(_);const b=this.TabwindowsService.openWindow("about:blank","NewWindow",800,600);b?.document.write(`<html><head><title>Website qu\u1ea3n l\xfd b\xe1n h\xe0ng cho doanh nghi\u1ec7p NextGo</title></head><body>${this.formPrintf.form}</body></html>`),b?.document.close(),b?.print()}).catch(p=>{}))}),this.PaymentService.createPayment(y).subscribe(h=>{console.log(h)})):(y.push({payment_method:2,pricePayment:this.paymentPrice,status:!0,paymentable_id:P,amount:this.priceBill,amount_in:this.pricePayment,amount_refund:this.changeBill,note:this.dataBill[this.tabDefault].note??"",reference_code:null,statusMap:!0}),this.PaymentService.createPayment(y).subscribe(h=>{console.log(h)}),this.DebtsService.createDebts(x).subscribe(h=>{console.log(h),h.status&&(l().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,title:"Th\xe0nh C\xf4ng!",text:"\u0110\xe3 \u0111\u1eb7t h\xe0ng th\xe0nh c\xf4ng!!",icon:"success",timerProgressBar:!0,didOpen:p=>{p.addEventListener("mouseenter",l().stopTimer),p.addEventListener("mouseleave",l().resumeTimer)}}),this.modalService.open(this.myModal).result.then(p=>{console.log(p),console.log(_),this.replaceKeysWithData(_);const b=this.TabwindowsService.openWindow("about:blank","NewWindow",800,600);b?.document.write(`<html><head><title>Website qu\u1ea3n l\xfd b\xe1n h\xe0ng cho doanh nghi\u1ec7p NextGo</title></head><body>${this.formPrintf.form}</body></html>`),b?.document.close(),b?.print()}).catch(p=>{}))})),this.dataCurrent[this.tabDefault].ListProductCart=[],this.dataCurrent[this.tabDefault].infoOrder=[],console.log(this.dataCurrent[this.tabDefault]),this.listProductCart=this.dataCurrent.map((h,p)=>h.ListProductCart),this.dataInfoUser=this.dataCurrent.map((h,p)=>h.infoOrder),this.selectedSearchPersonId="",this.pricePayment=this.dataBtnPayment[this.tabDefault].reduce((h,p)=>h+p.pricePayment,0),this.changeBill=0,this.dataBill[this.tabDefault]={discount:0,tax:0,totalPrice:0,service:0,radio:1,cash:0},this.dataBtnPayment[this.tabDefault]=[{payment_method:0,pricePayment:0,status:!1}],this.productItemsBatches[this.tabDefault]=[],this.modalData[this.tabDefault]=[],c=this.dataBtnPayment,d=this.productItemsBatches,f=this.listProductCart,localStorage.setItem("tabOrder",JSON.stringify(this.dataCurrent)),localStorage.setItem("dataBill",JSON.stringify(this.dataBill)),localStorage.setItem("TabModal",JSON.stringify(this.modalData)),localStorage.setItem("dataPayment",JSON.stringify(this.dataBtnPayment)),localStorage.setItem("dataBatches",JSON.stringify(this.productItemsBatches)),this.dataBtnPayment=c,this.productItemsBatches=d,this.listProductCart=f):(console.log(this.modalData),N&&Z?(x.amount_debt=Z.pricePayment,this.PaymentService.createPayment(y).subscribe(h=>{console.log(h)}),this.DebtsService.createDebts(x).subscribe(h=>{h.status&&(l().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,title:"Th\xe0nh C\xf4ng!",text:"\u0110\xe3 \u0111\u1eb7t h\xe0ng th\xe0nh c\xf4ng!!",icon:"success",timerProgressBar:!0,didOpen:p=>{p.addEventListener("mouseenter",l().stopTimer),p.addEventListener("mouseleave",l().resumeTimer)}}),this.modalService.open(this.myModal).result.then(p=>{console.log(p),console.log(_),this.replaceKeysWithData(_);const b=this.TabwindowsService.openWindow("about:blank","NewWindow",800,600);b?.document.write(`<html><head><title>Website qu\u1ea3n l\xfd b\xe1n h\xe0ng cho doanh nghi\u1ec7p NextGo</title></head><body>${this.formPrintf.form}</body></html>`),b?.document.close(),b?.print()}).catch(p=>{}))})):(y.push({payment_method:2,pricePayment:this.paymentPrice,status:!0,paymentable_id:P,amount:this.priceBill,amount_in:this.pricePayment,amount_refund:this.changeBill,note:this.dataBill[this.tabDefault].note??"",reference_code:null,statusMap:!0}),this.PaymentService.createPayment(y).subscribe(h=>{console.log(h)}),this.DebtsService.createDebts(x).subscribe(h=>{h.status&&(l().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,title:"Th\xe0nh C\xf4ng!",text:"\u0110\xe3 \u0111\u1eb7t h\xe0ng th\xe0nh c\xf4ng!!",icon:"success",timerProgressBar:!0,didOpen:p=>{p.addEventListener("mouseenter",l().stopTimer),p.addEventListener("mouseleave",l().resumeTimer)}}),this.modalService.open(this.myModal).result.then(p=>{console.log(p),console.log(_),this.replaceKeysWithData(_);const b=this.TabwindowsService.openWindow("about:blank","NewWindow",800,600);b?.document.write(`<html><head><title>Website qu\u1ea3n l\xfd b\xe1n h\xe0ng cho doanh nghi\u1ec7p NextGo</title></head><body>${this.formPrintf.form}</body></html>`),b?.document.close(),b?.print()}).catch(p=>{}))})),this.dataCurrent.splice(this.tabDefault,1),this.dataBill.splice(this.tabDefault,1),this.dataBtnPayment.splice(this.tabDefault,1),this.modalData.splice(this.tabDefault,1),this.productItemsBatches.splice(this.tabDefault,1),this.tabDefault=this.tabDefault-1,this.singleTax=this.dataBill[this.tabDefault].discount,this.DiscountBill=this.dataBill[this.tabDefault].tax,this.taxBill=this.dataBill[this.tabDefault].service,this.modelRadioBill=this.dataBill[this.tabDefault].radio,this.priceBill=this.dataBill[this.tabDefault].totalPrice,this.selectedSearchPersonId=Object.keys(this.dataCurrent[this.tabDefault].infoOrder).length>0?this.dataCurrent[this.tabDefault].infoOrder.id:"",c=this.dataBtnPayment,d=this.productItemsBatches,f=this.listProductCart,console.log(this.modalData),localStorage.setItem("tabOrder",JSON.stringify(this.dataCurrent)),localStorage.setItem("dataBill",JSON.stringify(this.dataBill)),localStorage.setItem("TabModal",JSON.stringify(this.modalData)),localStorage.setItem("dataPayment",JSON.stringify(this.dataBtnPayment)),localStorage.setItem("dataBatches",JSON.stringify(this.productItemsBatches)),this.DatalayoutService.changeData({tabCurrent:this.tabDefault}),localStorage.setItem("TabCurrentIndex",JSON.stringify(this.tabDefault))),this.listProductCart=f,this.dataBtnPayment=c,this.productItemsBatches=d}}),console.log(this.dataBtnPayment)):l().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,title:"Th\u1ea5t b\u1ea1i!",text:"Vui l\xf2ng th\xeam kh\xe1ch h\xe0ng v\xe0o \u0111\u01a1n!!",icon:"error",timerProgressBar:!0,didOpen:g=>{g.addEventListener("mouseenter",l().stopTimer),g.addEventListener("mouseleave",l().resumeTimer)}})}}).catch(n=>{})}replaceKeysWithData(e={}){console.log(e.Listproducts);for(const i in e)if("Listproducts"===i&&e.hasOwnProperty(i)){const n=e.Listproducts.map((a,o)=>`<tr>${["display_name","priceModal","quanity","result"].map(d=>"priceModal"===d?`<td>${a[d].result}</td>`:`<td>${a[d]}</td>`).join("")}</tr>`).join("");this.formPrintf.form=this.formPrintf.form.replace("{Listproducts}",n)}else{console.log(2);const a=e[i];this.formPrintf.form=this.formPrintf.form.replace(new RegExp(`{${i}}`,"g"),a)}}limitInputTax(e){+e.target.value>100?(e.target.value=100,this.tax=100):(+e.target.value<0||""==e.target.value)&&(e.target.value=0,this.tax=0)}increaseQuantity(e){let i=document.getElementById(`${e}`);const n=1+Number(i.value);this.updateQuantity(this.listProductCart[this.tabDefault],+e,n,"quanity"),this.totalMoney=this.listProductCart[this.tabDefault].reduce((a,o)=>a+o.result,0),this.resultBill(this.tabDefault),localStorage.setItem("tabOrder",JSON.stringify(this.dataCurrent))}decreaseQuantity(e){let i=document.getElementById(`${e}`);+i.value>0&&(this.updateQuantity(this.listProductCart[this.tabDefault],+e,Number(i.value)-1,"quanity"),this.totalMoney=this.listProductCart[this.tabDefault].reduce((n,a)=>n+a.result,0),this.resultBill(this.tabDefault),localStorage.setItem("tabOrder",JSON.stringify(this.dataCurrent)))}removeBatches(e){}increaseQuantityBatches(e){let i=document.getElementById(`quantityBatches-${e}`);const n=1+Number(i.value);this.selectedPeopleBatches.find(o=>o.id===e).payQuality=n,localStorage.setItem("dataBatches",JSON.stringify(this.productItemsBatches))}decreaseQuantityBatches(e){let i=document.getElementById(`quantityBatches-${e}`);+i.value>0&&(console.log(this.productItemsBatches),this.selectedPeopleBatches.find(a=>a.id===e).payQuality=+i.value-1,localStorage.setItem("dataBatches",JSON.stringify(this.productItemsBatches)))}removePayment(e){if(console.log(e),0==e){console.log(this.dataBtnPayment[this.tabDefault]);const i=this.dataBtnPayment[this.tabDefault][e];i.payment_method=0,i.pricePayment=0,i.status=!1,this.pricePayment=this.dataBtnPayment[this.tabDefault].reduce((n,a)=>n+a.pricePayment,0),this.pricePayment>this.priceBill?(this.changeBill=this.pricePayment-this.priceBill,this.paymentPrice=0):(this.changeBill=0,this.paymentPrice=this.priceBill-this.pricePayment),localStorage.setItem("dataPayment",JSON.stringify(this.dataBtnPayment))}else this.dataBtnPayment[this.tabDefault].splice(e,1),this.pricePayment=this.dataBtnPayment[this.tabDefault].reduce((i,n)=>i+n.pricePayment,0),this.pricePayment>this.priceBill?(this.changeBill=this.pricePayment-this.priceBill,this.paymentPrice=0):(this.changeBill=0,this.paymentPrice=this.priceBill-this.pricePayment),localStorage.setItem("dataPayment",JSON.stringify(this.dataBtnPayment));console.log(this.dataBtnPayment)}updateQuantity(e,i,n,a){const o="quanity"===a?"quanity":"price_export",u="quanity"===a?"price_export":"quanity";for(let c=0;c<e.length;c++)if(e[c].id===i){e[c][o]=n,e[c].result=n*e[c][u];break}}updateModal(e,i,n){console.log(e);for(let a=0;a<e.length;a++)if(e[a].id===i){for(const[o,u]of Object.entries(n))e[a][o]=u;break}}updateBill(e,i,n){console.log(e);for(let a=0;a<e.length;a++)if(a===i){for(const[o,u]of Object.entries(n))e[a][o]=u;break}}showNextMessage(e){if(e.length>0){const i=e.shift();l().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,title:"Th\u1ea5t b\u1ea1i!",text:i,icon:"error",timerProgressBar:!0,didOpen:n=>{n.addEventListener("mouseenter",l().stopTimer),n.addEventListener("mouseleave",l().resumeTimer)},didClose:()=>{this.showNextMessage(e)}})}}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(v.FF),t.Y36(w.K),t.Y36(J.v),t.Y36(H),t.Y36(K.p),t.Y36(F.t),t.Y36(G.Y),t.Y36(L.$),t.Y36(Q))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-tabshop"]],viewQuery:function(e,i){if(1&e&&t.Gf($,5),2&e){let n;t.iGM(n=t.CRH())&&(i.myModal=n.first)}},decls:111,vars:27,consts:[[1,"row"],[1,"col-lg-8","grid-margin","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[1,"card-footer"],["activeIds","static-1",3,"closeOthers"],["id","static-1","title","Danh s\xe1ch s\u1ea3n ph\u1ea9m"],["ngbPanelContent",""],[1,"col-lg-4","grid-margin","stretch-card"],[1,"mb-3","position-relative"],[1,"d-flex","justify-content-between"],[1,"feather","text-primary","icon-plus-circle","icon-md",2,"cursor","pointer",3,"click"],["bindLabel","displayName","bindValue","id","placeholder","T\xccM KI\u1ebeM KH\xc1CH H\xc0NG",3,"items","ngModel","ngModelChange","change"],[1,"title-bill"],[1,"table"],[1,"text-end"],[1,"align-middle"],["type","number",1,"form-control","text-end","border-0","border-bottom",3,"value","ngModel","ngModelChange","input"],[1,"text-bold-800","align-middle"],[1,"text-bold-800","text-end"],["type","number",1,"form-control","text-end","border-0","border-bottom",3,"value","click"],[1,"bg-light"],[1,"text-bold-800","fw-bold","align-middle"],[1,"text-bold-800","text-end","text-primary","fw-bold"],[1,"text-primary","fw-bold","align-middle"],["type","text","disabled","",1,"form-control","bg-white","border-0","text-end",3,"value"],[1,"text-bold-800","fw-bold","fs-5","align-middle"],["type","text","disabled","",1,"form-control","bg-white","border-0","fs-3","text-end","fw-bold",3,"value"],[1,"d-flex","align-items-center","form-control","border-0","border-bottom","mb-2"],[1,"feather","icon-edit-3","title-bill","icon-md"],["type","text","placeholder","Th\xeam ghi ch\xfa cho \u0111\u01a1n h\xe0ng",1,"border-0","ms-2","btn-icon-edit","w-100","fw-bold",3,"value","ngModel","ngModelChange","input"],["type","button",1,"btn","btn-primary","w-100","p-4","fs-4","fw-bold",3,"disabled","click"],["batches",""],["basicModal",""],["class","mt-2",4,"ngIf"],["basicModalAddUser",""],["typeProducts",""],["basicModaldiscount",""],["basicPay",""],["printf",""],[1,"d-flex"],[1,"py-1"],["src","http://via.placeholder.com/36x36","alt","image"],[1,"ms-2"],["type","button",1,"btn","btn-lg","text-black-50",3,"click"],["type","number","name","quanity",1,"form-control",3,"id","value","input"],["type","text","name","price",1,"form-control",3,"id","value","input","click"],[1,"text-primary","align-middle"],[4,"ngIf","ngIfElse"],["otherIff",""],[1,"align-middle",2,"cursor","pointer"],[1,"feather","text-danger","icon-x","icon-md",3,"click"],[1,"align-middle",2,"cursor","pointer",3,"click"],[1,"feather","icon-archive"],["class","col-4",4,"ngFor","ngForOf"],[1,"col-4"],["class","card d-block",4,"ngIf","ngIfElse"],["showFirstItem",""],[1,"card","d-block"],[1,"card-body","p-2","d-flex","align-items-center","justify-content-evenly"],[1,"d-flex","align-items-center"],[1,"img-products"],["width","100%","src","https://prod-core-images.s3.ap-southeast-1.amazonaws.com/nextshop/1697731423873.jpg","alt",""],[1,"item-name"],[1,"price-name","fs-6"],[1,"price-name","ms-2"],["quantityAvailable",""],[2,"cursor","pointer"],[1,"feather","text-primary","icon-plus","icon-md",3,"click"],[2,"color","red"],[2,"font-size","10px","color","#808890"],[1,"card","d-block","mt-2"],[1,"item-name","fs-6"],[1,"price-name"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["bindLabel","code","placeholder","Ch\u1ecdn L\xf4,HSD...",3,"items","multiple","closeOnSelect","searchable","ngModel","change","ngModelChange"],[1,"table","mt-2"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"feather","icon-x-circle","text-danger",3,"click"],[1,"mb-3"],["for","unit_price",1,"form-label"],["type","number","id","unit_price","autocomplete","off","name","price",1,"form-control",3,"ngModel","value","ngModelChange"],["for","Discount",1,"form-label"],[1,"position-relative"],["type","number","id","Discount","placeholder","Chi\u1ebft kh\u1ea5u",1,"form-control","p-3",3,"ngModel","input","ngModelChange"],["role","group","aria-label","Basic radio toggle button group",1,"btn-group","position-absolute","top-50","end-0","translate-middle-y"],["type","radio","name","btnradio","id","btnradio2","autocomplete","off",1,"btn-check",3,"ngModel","value","ngModelChange","change"],["for","btnradio2",1,"btn","btn-outline-primary"],["type","radio","checked","","name","btnradio","id","btnradio3","autocomplete","off",1,"btn-check",3,"ngModel","value","ngModelChange","change"],["for","btnradio3",1,"btn","btn-outline-primary"],["for","Tax",1,"form-label"],["type","number","id","Tax","autocomplete","off","value","0",1,"form-control",3,"ngModel","ngModelChange","input"],[1,"mt-2"],["for","fulName",1,"form-label"],[1,"text-danger"],["type","text","id","fulName",1,"form-control",3,"ngModel","ngModelChange"],["for","phoneNumber",1,"form-label"],["type","text","id","phoneNumber",1,"form-control",3,"ngModel","ngModelChange"],["class","d-flex justify-content-between border-bottom border-dark","style","background: #e9ecef;",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","border-bottom","border-dark",2,"background","#e9ecef"],[1,"d-flex","align-items-center","border-0"],[1,"d-flex","flex-column"],[1,"align-middle","ms-2",2,"cursor","pointer"],[1,"text-primary","align-middle","text-center"],[2,"font-size","12px","color","#808890"],["type","number","id","Discount","placeholder","Email","value","0",1,"form-control","p-3",3,"ngModel","ngModelChange","change"],["type","radio","name","btnradio","id","btnradio2","autocomplete","off",1,"btn-check",3,"ngModel","value","ngModelChange"],["type","radio","checked","","name","btnradio","id","btnradio3","autocomplete","off",1,"btn-check",3,"ngModel","value","ngModelChange"],[1,"mb-3","fs-5","fw-bold","d-flex","justify-content-between","align-items-center"],[1,"text-primary","fs-4"],[1,"fs-5","fw-normal"],["role","group","aria-label","Basic radio toggle button group ",1,"d-flex","justify-content-evenly","mt-4"],[1,"border","rounded","btn-outline-secondary"],["type","radio","name","btnradio","id","btnradio1","autocomplete","off",1,"btn-check",3,"ngModel","value","ngModelChange","change"],["for","btnradio1",1,"btn","title-bill","px-4","py-2","d-block"],["src","../../../../../assets/images/others/Payment_Cash.svg","alt",""],["type","radio","id","btnradio2","name","btnradio","autocomplete","off",1,"btn-check",3,"ngModel","value","ngModelChange","change"],["for","btnradio2",1,"btn","title-bill","px-4","py-2","d-block"],["src","../../../../../assets/images/others/Payment_Transfer.svg","alt",""],["type","radio","name","btnradio","id","btnradio4","autocomplete","off",1,"btn-check",3,"ngModel","value","ngModelChange","change"],["for","btnradio4",1,"btn","title-bill","px-4","py-2","d-block"],["src","../../../../../assets/images/others/Debt.68ccc6d1.svg","alt",""],[1,"fs-5","fw-normal","my-2"],["class","row mt-2",4,"ngFor","ngForOf"],[1,"modal-footer","flex-column"],[1,"text-primary","p-0","fw-bold","align-middle"],[1,"text-end","p-0","d-flex","align-items-center"],["type","text","disabled","",1,"form-control","bg-white","border-0","text-end",2,"background-color","#e9ecef !important",3,"value"],[1,"text-bold-800","p-0","align-middle"],[1,"text-end","p-0","text-danger","d-flex","align-items-center"],["type","text","disabled","",1,"form-control","bg-white","text-danger","border-0","text-end",2,"background-color","#e9ecef  !important",3,"value"],["type","text","disabled","",1,"form-control","bg-white","text-danger","border-0","text-end",2,"background-color","#e9ecef !important",3,"value"],[1,"mt-4"],["type","button",1,"btn","btn-primary","ms-2",3,"disabled","click"],[1,"row","mt-2"],[1,"col-3"],[1,"border","rounded"],[1,"btn","d-flex","align-items-center","fs-5"],["alt","",3,"src"],[1,"col-9","d-flex","align-items-center"],[1,"position-relative","h-100",2,"flex","1"],["type","text",1,"form-control","text-start","p-2","h-100",3,"ngModel","disabled","ngModelChange","input"],[1,"btn","btn-primary","p-0","position-absolute","top-50","start-80","translate-middle",2,"width","100px",3,"click"],[1,"feather","icon-delete","text-danger","ms-2",2,"cursor","pointer",3,"click"],[1,"form-check","mb-2","mt-3"],["type","radio","name","bill","checked","","id","radioDefault",1,"form-check-input"],["for","radioDefault",1,"form-check-label"],[1,"form-check","mt-3","mb-2"],["type","radio","name","template","checked","","id","radioDefault",1,"form-check-input"]],template:function(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),t._uU(5,"DANH S\xc1CH S\u1ea2N PH\u1ea8M"),t.qZA(),t.TgZ(6,"div",5)(7,"table",6)(8,"thead")(9,"tr")(10,"th"),t._uU(11,"S\u1ea3n Ph\u1ea9m"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"\u0110\u01a1n V\u1ecb"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"S\u1ed1 l\u01b0\u1ee3ng"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"\u0110\u01a1n gi\xe1"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Th\xe0nh ti\u1ec1n"),t.qZA(),t._UZ(20,"th")(21,"th"),t.qZA()(),t.TgZ(22,"tbody"),t.YNc(23,W,29,14,"tr",7),t.qZA()()()(),t.TgZ(24,"div",8)(25,"ngb-accordion",9)(26,"ngb-panel",10),t.YNc(27,nt,2,1,"ng-template",11),t.qZA()()()()(),t.TgZ(28,"div",12)(29,"div",2)(30,"div",3)(31,"div",13)(32,"div",14)(33,"h6",4),t._uU(34,"Th\xeam kh\xe1ch h\xe0ng v\xe0o \u0111\u01a1n"),t.qZA(),t.TgZ(35,"i",15),t.NdJ("click",function(){t.CHM(n);const o=t.MAs(102);return t.KtG(i.openBasicModal(o))}),t.qZA()(),t.TgZ(36,"ng-select",16),t.NdJ("ngModelChange",function(o){return i.selectedSearchPersonId=o})("change",function(){return i.peopleEvent()}),t.qZA()(),t.TgZ(37,"b",17),t._uU(38,"TH\xd4NG TIN \u0110\u01a0N H\xc0NG"),t.qZA(),t.TgZ(39,"div",5)(40,"table",18)(41,"tbody")(42,"tr")(43,"td"),t._uU(44),t.qZA(),t.TgZ(45,"td",19),t._uU(46),t.ALo(47,"currency"),t.qZA()(),t.TgZ(48,"tr")(49,"td",20),t._uU(50,"Thu\u1ebf t\u1ed5ng \u0111\u01a1n (%)"),t.qZA(),t.TgZ(51,"td",19)(52,"input",21),t.NdJ("ngModelChange",function(o){return i.singleTax=o})("input",function(){return i.resultBill(i.tabDefault)}),t.qZA()()(),t.TgZ(53,"tr")(54,"td",22),t._uU(55),t.qZA(),t.TgZ(56,"td",23)(57,"input",24),t.NdJ("click",function(){t.CHM(n);const o=t.MAs(106);return t.KtG(i.openBasicModal(o))}),t.qZA()()(),t.TgZ(58,"tr")(59,"td",22),t._uU(60,"Ph\xed d\u1ecbch v\u1ee5"),t.qZA(),t.TgZ(61,"td",23)(62,"input",21),t.NdJ("ngModelChange",function(o){return i.taxBill=o})("input",function(){return i.resultBill(i.tabDefault)}),t.qZA()()(),t.TgZ(63,"tr",25)(64,"td",26),t._uU(65,"Kh\xe1ch ph\u1ea3i tr\u1ea3"),t.qZA(),t.TgZ(66,"td",27),t._uU(67),t.ALo(68,"currency"),t.qZA()()()()(),t._UZ(69,"hr"),t.TgZ(70,"b",17),t._uU(71,"KH\xc1CH TR\u1ea2"),t.qZA(),t.TgZ(72,"div",5)(73,"table",18)(74,"tbody")(75,"tr")(76,"td",28),t._uU(77,"Ti\u1ec1n m\u1eb7t"),t.qZA(),t.TgZ(78,"td",19)(79,"input",21),t.NdJ("ngModelChange",function(o){return i.cashPrice=o})("input",function(o){return i.changeCash(o)}),t.qZA()()(),t.TgZ(80,"tr")(81,"td",22),t._uU(82,"C\xf2n l\u1ea1i c\u1ea7n thanh to\xe1n"),t.qZA(),t.TgZ(83,"td",19),t._UZ(84,"input",29),t.qZA()(),t.TgZ(85,"tr")(86,"td",30),t._uU(87,"Ti\u1ec1n th\u1eeba"),t.qZA(),t.TgZ(88,"td",19),t._UZ(89,"input",31),t.qZA()()()()()(),t.TgZ(90,"div",8)(91,"div",32),t._UZ(92,"i",33),t.TgZ(93,"input",34),t.NdJ("ngModelChange",function(o){return i.noteBill=o})("input",function(){return i.noteBillEvent()}),t.qZA()(),t.TgZ(94,"button",35),t.NdJ("click",function(){t.CHM(n);const o=t.MAs(108);return t.KtG(i.openLgModal(o))}),t._uU(95,"Thanh To\xe1n"),t.qZA()()()()(),t.YNc(96,ot,25,6,"ng-template",null,36,t.W1O),t.YNc(98,st,30,8,"ng-template",null,37,t.W1O),t.YNc(100,lt,2,1,"p",38),t.YNc(101,rt,22,2,"ng-template",null,39,t.W1O),t.YNc(103,ht,9,1,"ng-template",null,40,t.W1O),t.YNc(105,pt,22,5,"ng-template",null,41,t.W1O),t.YNc(107,_t,59,16,"ng-template",null,42,t.W1O),t.YNc(109,gt,19,0,"ng-template",null,43,t.W1O)}2&e&&(t.xp6(23),t.Q6J("ngForOf",i.listProductCart[i.tabDefault]),t.xp6(2),t.Q6J("closeOthers",!0),t.xp6(11),t.Q6J("items",i.people)("ngModel",i.selectedSearchPersonId),t.xp6(8),t.hij("T\u1ed5ng ti\u1ec1n (",i.listProductCart[i.tabDefault].length," s\u1ea3n ph\u1ea7m)"),t.xp6(2),t.Oqu(t.xi3(47,21,i.totalMoney,"VND")),t.xp6(6),t.s9C("value",i.singleTax),t.Q6J("ngModel",i.singleTax),t.xp6(3),t.hij("Chi\u1ebft kh\u1ea5u (",1==i.modelRadioBill?"%":"\u0111",")"),t.xp6(2),t.s9C("value",i.DiscountBill),t.xp6(5),t.s9C("value",i.taxBill),t.Q6J("ngModel",i.taxBill),t.xp6(5),t.hij("",t.xi3(68,24,i.priceBill,"VND")," "),t.xp6(12),t.s9C("value",i.cashPrice),t.Q6J("ngModel",i.cashPrice),t.xp6(5),t.s9C("value",i.paymentPrice),t.xp6(5),t.s9C("value",i.changeBill),t.xp6(4),t.s9C("value",i.noteBill),t.Q6J("ngModel",i.noteBill),t.xp6(1),t.Q6J("disabled",0==i.listProductCart[i.tabDefault].length),t.xp6(6),t.Q6J("ngIf",""!=i.basicModalCloseResult))},dependencies:[D.sg,D.O5,B.Fj,B.wV,B._,B.JJ,E.w9,B.On,v.gY,v.Gk,v.gW,D.H9],styles:[".card-body[_ngcontent-%COMP%]   .img-products[_ngcontent-%COMP%]{display:block;width:40px;height:40px;border-radius:4px;margin-right:20px}.card-body[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-size:.8rem}.card-body[_ngcontent-%COMP%]   .price-name[_ngcontent-%COMP%]{font-size:.7rem}.title-bill[_ngcontent-%COMP%]{color:#ccc}.btn-icon-edit[_ngcontent-%COMP%]{outline:none}.btn-icon-edit[_ngcontent-%COMP%]::placeholder{color:#ccc}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}"]}),s})();var bt=m(1094),S=m(265),Ct=m(9628),Tt=m(907),yt=m(4826),Bt=m(5351),xt=m(6134);let vt=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-shop"]],decls:1,vars:0,template:function(e,i){1&e&&t._UZ(0,"router-outlet")},dependencies:[S.lC],encapsulation:2}),s})();var q=m(4841);const Pt={suppressScrollX:!0},Zt=[{path:"",component:vt,children:[{path:"tabshop",component:ft}]}];let Dt=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({providers:[{provide:q.op,useValue:Pt}],imports:[D.ez,S.Bz.forChild(Zt),Ct.L,Tt.dD,yt.bB,Bt.bQ.forRoot({animation:150,ghostClass:"bg-light"}),xt.ii.forRoot(),B.UX,E.A0,B.u5,bt.yI.forRoot({validation:!0}),v.XC,v.Gs,q.Xd]}),s})()}}]);