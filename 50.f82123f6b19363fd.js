"use strict";(self.webpackChunknobleui_angular=self.webpackChunknobleui_angular||[]).push([[50],{2050:(ue,v,u)=>{u.r(v),u.d(v,{CustomersModule:()=>se});var c=u(6895),E=u(2366),T=u(9751),A=u(9646),N=u(5226),l=u.n(N),e=u(4650),C=u(3610),m=u(265);const x=function(o){return["../edit",o]};function U(o,i){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td")(10,"a",14),e._uU(11,"S\u1eeda"),e.qZA(),e.TgZ(12,"button",15),e._uU(13,"X\xf3a"),e.qZA()()()),2&o){const t=i.$implicit;e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(0==t.type?"C\xe1 nh\xe2n":"Doanh nghi\u1ec7p"),e.xp6(2),e.Oqu(t.tel),e.xp6(2),e.Q6J("routerLink",e.VKq(6,x,t.id)),e.xp6(2),e.s9C("id",t.id)}}let F=(()=>{class o{constructor(t){this.CustomersService=t,this.Customers=new T.y}ngOnInit(){this.refreshCategories()}ngAfterViewInit(){this.Customers.subscribe(()=>{setTimeout(()=>{new E.w("#dataTableExample").on("datatable.init",()=>{this.addDeleteEventHandlers()})},0)})}addDeleteEventHandlers(){const t=document.getElementsByClassName("btn-danger");Array.from(t).forEach(n=>{n.addEventListener("click",s=>{const a=s.target.getAttribute("id");this.deleteCategory(Number(a))})})}deleteCategory(t){l().fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a?",text:"B\u1ea1n s\u1ebd kh\xf4ng th\u1ec3 ho\xe0n t\xe1c l\u1ea1i h\xe0nh \u0111\u1ed9ng n\xe0y!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"C\xf3, x\xf3a n\xf3!"}).then(n=>{n.isConfirmed&&this.CustomersService.delete(t).subscribe(s=>{l().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,title:"Th\xe0nh c\xf4ng!",text:"Danh m\u1ee5c b\u1ea3o h\xe0nh c\u1ee7a b\u1ea1n \u0111\xe3 \u0111\u01b0\u1ee3c x\xf3a.",icon:"success",timerProgressBar:!0,didOpen:a=>{a.addEventListener("mouseenter",l().stopTimer),a.addEventListener("mouseleave",l().resumeTimer)}}),location.reload()},s=>{l().fire("L\u1ed7i!","C\xf3 l\u1ed7i x\u1ea3y ra khi x\xf3a danh m\u1ee5c.","error")})})}refreshCategories(){this.CustomersService.GetData().subscribe(t=>{1==t.status&&(this.Customers=(0,A.of)(t.payload),this.Customers.subscribe(n=>{setTimeout(()=>{new E.w("#dataTableExample").on("datatable.init",()=>{this.addDeleteEventHandlers()})},0)}))},t=>{l().fire("L\u1ed7i!","C\xf3 l\u1ed7i x\u1ea3y ra khi x\xf3a danh m\u1ee5c.","error")})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C.v))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-list"]],decls:40,vars:3,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title"],["routerLink","/customers/create","type","button",1,"btn","btn-primary"],[1,"table-responsive"],["id","dataTableExample",1,"table"],[4,"ngFor","ngForOf"],[1,"btn","btn-success","mx-2",3,"routerLink"],[1,"btn","btn-danger",3,"id"]],template:function(t,n){1&t&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._uU(4,"Kh\xe1ch h\xe0ng"),e.qZA()(),e.TgZ(5,"li",4),e._uU(6,"Danh m\u1ee5c kh\xe1ch h\xe0ng"),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"h6",9),e._uU(12,"Qu\u1ea3n l\xed Kh\xe1ch h\xe0ng"),e.qZA(),e.TgZ(13,"button",10),e._uU(14,"Th\xeam m\u1edbi"),e.qZA(),e.TgZ(15,"div",11)(16,"table",12)(17,"thead")(18,"tr")(19,"th"),e._uU(20,"ID"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"T\xcaN KH\xc1CH H\xc0NG"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"THU\u1ed8C LO\u1ea0I"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"S\u1ed0 \u0110I\u1ec6N THO\u1ea0I"),e.qZA(),e.TgZ(27,"th"),e._uU(28,"H\xc0NH \u0110\u1ed8NG"),e.qZA()()(),e.TgZ(29,"tbody"),e.YNc(30,U,14,8,"tr",13),e.ALo(31,"async"),e.qZA(),e.TgZ(32,"tfoot")(33,"tr"),e._UZ(34,"th")(35,"th")(36,"th")(37,"th")(38,"th")(39,"th"),e.qZA()()()()()()()()),2&t&&(e.xp6(30),e.Q6J("ngForOf",e.lcZ(31,1,n.Customers)))},dependencies:[c.sg,m.rH,m.yS,c.Ov]}),o})();var r=u(433),g=u(8372),p=u(3900),f=u(7579),b=u(4571),Z=u(8489),d=u(8796);function q(o,i){1&o&&(e.TgZ(0,"div",38),e._uU(1," Kh\xf4ng \u0111\u1ec3 tr\u1ed1ng t\xean kh\xe1ch h\xe0ng "),e.qZA())}function D(o,i){1&o&&(e.TgZ(0,"div",38),e._uU(1," Kh\xf4ng \u0111\u1ec3 tr\u1ed1ng S\u1ed1 \u0111i\u1ec7n tho\u1ea1i "),e.qZA())}function y(o,i){if(1&o&&(e.TgZ(0,"ng-option",39),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",+t.id),e.xp6(1),e.Oqu(t.name)}}function w(o,i){if(1&o&&(e.TgZ(0,"ng-option",39),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",+t.id),e.xp6(1),e.Oqu(t.name)}}function I(o,i){if(1&o&&(e.TgZ(0,"ng-option",39),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function S(o,i){if(1&o&&(e.TgZ(0,"ng-option",39),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function J(o,i){if(1&o&&(e.TgZ(0,"ng-option",39),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Q(o,i){if(1&o&&(e.TgZ(0,"ng-option",39),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function O(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"div",11)(2,"label",12),e._uU(3,"Ch\u1ecdn X\xe3"),e.qZA(),e.TgZ(4,"ng-select",40),e.NdJ("ngModelChange",function(s){e.CHM(t);const a=e.oxw();return e.KtG(a.codeWard=s)}),e.YNc(5,Q,2,2,"ng-option",21),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(4),e.Q6J("searchable",!0)("ngModel",t.codeWard),e.xp6(1),e.Q6J("ngForOf",t.wards)}}let L=(()=>{class o{constructor(t,n,s,a){this.CustomersService=t,this.GroupCustomersService=n,this.AresService=s,this.router=a,this.types=[],this.GroupsCustomers=[],this.provinceChangeSubject=new f.x,this.districtChangeSubject=new f.x,this.provinces=[],this.districts=[],this.wards=[],this.status=[],this.isWardDataLoaded=!1,this.customersForm=new r.cw({name:new r.NI("",r.kI.required),type:new r.NI(0),dob:new r.NI(""),group_customer_id:new r.NI(""),province_code:new r.NI(""),district_code:new r.NI(""),ward_code:new r.NI(""),email:new r.NI(""),tel:new r.NI("",r.kI.required),status:new r.NI(1),address_detail:new r.NI(""),note:new r.NI(""),gender:new r.NI(0)}),this.district=[],this.ward=[]}ngOnInit(){this.types=[{id:0,name:"C\xe1 nh\xe2n"},{id:1,name:"Doanh nghi\u1ec7p"}],this.status=[{id:0,name:"K\xedch ho\u1ea1t"},{id:1,name:"Kh\xf4ng k\xedch ho\u1ea1t"}],this.GroupCustomersService.GetData().subscribe(t=>{this.GroupsCustomers=t.payload.data}),this.AresService.getProvinces().subscribe(t=>{this.provinces="error"!=t.status?t.results:[{id:0,name:`${t.message}`}]}),this.provinceChangeSubject.pipe((0,g.b)(300),(0,p.w)(t=>this.AresService.getDistricts(t))).subscribe(t=>{this.districts="error"!=t.status?t.results:[{id:0,name:`${t.message}`}],this.district=t.results}),this.districtChangeSubject.pipe((0,g.b)(300),(0,p.w)(t=>this.AresService.getWards(t))).subscribe(t=>{this.wards="error"!=t.status?t.results:{id:0,name:`${t.message}`,status:!1},this.ward=t.results,this.isWardDataLoaded="error"!=t.status})}onProvinceChange(){this.provinceChangeSubject.next(Number(this.customersForm.value.province_code))}onDistrictChange(){this.districtChangeSubject.next(Number(this.customersForm.value.district_code))}onSubmit(){if(this.customersForm.valid){const t={name:String(this.customersForm.value.name),type:Number(this.customersForm.value.type)||0,dob:String(this.customersForm.value.dob)||null,group_customer_id:Number(this.customersForm.value.group_customer_id)||null,province_code:Number(this.customersForm.value.province_code)||null,gender:Number(this.customersForm.value.gender),district_code:Number(this.customersForm.value.district_code)||null,email:String(this.customersForm.value.email)||null,tel:String(this.customersForm.value.tel),status:Number(this.customersForm.value.status),address_detail:String(this.customersForm.value.address_detail)||null,note:String(this.customersForm.value.note)||null,ward_code:Number(this.customersForm.value.ward_code)||null,created_at:new Date,updated_at:null};console.log(t),this.CustomersService.create(t).subscribe(n=>{if(1==n.status)this.customersForm.reset(),l().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,title:"Th\xe0nh c\xf4ng!",text:"Th\xeam kh\xe1ch h\xe0ng th\xe0nh c\xf4ng",icon:"success",timerProgressBar:!0,didOpen:s=>{s.addEventListener("mouseenter",l().stopTimer),s.addEventListener("mouseleave",l().resumeTimer)}}),this.router.navigate(["../customers/list"]);else{console.log(n);const s=[];for(const a in n.meta.errors){const h=n.meta.errors[a];for(const _ of h)s.push(`${a}: ${_}`)}this.showNextMessage(s)}},n=>{console.log(n),l().fire("L\u1ed7i!","C\xf3 l\u1ed7i x\u1ea3y ra khi g\u1eedi d\u1eef li\u1ec7u.","error")})}else alert("Kh\xf4ng \u0111\u1ec3 tr\u1ed1ng")}showNextMessage(t){if(t.length>0){const n=t.shift();l().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,title:"Th\u1ea5t b\u1ea1i!",text:n,icon:"error",timerProgressBar:!0,didOpen:s=>{s.addEventListener("mouseenter",l().stopTimer),s.addEventListener("mouseleave",l().resumeTimer)},didClose:()=>{this.showNextMessage(t)}})}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C.v),e.Y36(b.m),e.Y36(Z.M),e.Y36(m.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-create"]],decls:90,vars:17,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","grid-margin","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"forms-sample",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","exampleInputUsername1",1,"form-label"],[1,"text-danger"],["type","text","id","exampleInputUsername1","formControlName","name","autocomplete","off","placeholder","Nh\u1eadp t\xean kh\xe1ch h\xe0ng",1,"form-control"],["class","alert alert-danger mt-2",4,"ngIf"],[1,"form-label"],["type","date","formControlName","dob","placeholder","dd/mm/yyyy",1,"form-control","mb-4","mb-md-0"],["type","email","id","exampleInputUsername1","formControlName","email","autocomplete","off","placeholder","Nh\u1eadp email",1,"form-control"],["type","text","id","exampleInputUsername1","formControlName","tel","autocomplete","off","placeholder","Nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i",1,"form-control"],["formControlName","status","placeholder","Ch\u1ecdn Tr\u1ea1ng th\xe1i",3,"searchable"],[3,"value",4,"ngFor","ngForOf"],["formControlName","type","placeholder","Ch\u1ecdn lo\u1ea1i kh\xe1ch h\xe0ng",3,"searchable"],["formControlName","group_customer_id","placeholder","Ch\u1ecdn Nh\xf3m kh\xe1ch h\xe0ng",3,"searchable"],[1,"mb-4"],[1,"form-check","form-check-inline"],["type","radio","formControlName","gender","value","0","id","radioInline",1,"form-check-input"],["for","radioInline",1,"form-check-label"],["type","radio","formControlName","gender","value","1","id","radioInline1",1,"form-check-input"],["for","radioInline1",1,"form-check-label"],["type","radio","formControlName","gender","value","2","id","radioInline1",1,"form-check-input"],["formControlName","province_code","placeholder","Ch\u1ecdn T\u1ec9nh",3,"searchable","ngModel","change","ngModelChange"],["formControlName","district_code","placeholder","Ch\u1ecdn T\u1ec9nh",3,"searchable","ngModel","change","ngModelChange"],[4,"ngIf"],["id","exampleFormControlTextarea1","placeholder","Nh\u1eadp \u0111\u1ecba ch\u1ec9","formControlName","address_detail","rows","5",1,"form-control"],["id","exampleFormControlTextarea1","placeholder","Nh\u1eadp ghi ch\xfa","formControlName","note","rows","5",1,"form-control"],["type","submit",1,"btn","btn-primary","me-2",3,"disabled"],["routerLink","/categories/list",1,"btn","btn-secondary"],[1,"alert","alert-danger","mt-2"],[3,"value"],["formControlName","ward_code","placeholder","Ch\u1ecdn X\xe3",3,"searchable","ngModel","ngModelChange"]],template:function(t,n){1&t&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._uU(4,"Danh m\u1ee5c"),e.qZA()(),e.TgZ(5,"li",4),e._uU(6,"Th\xeam m\u1edbi danh m\u1ee5c"),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"h6",9),e._uU(12,"Th\xeam m\u1edbi Danh m\u1ee5c"),e.qZA(),e.TgZ(13,"form",10),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(14,"div",11)(15,"label",12),e._uU(16,"T\xean Kh\xe1ch h\xe0ng"),e.TgZ(17,"span",13),e._uU(18,"(*)"),e.qZA()(),e._UZ(19,"input",14),e.YNc(20,q,2,0,"div",15),e.qZA(),e.TgZ(21,"div",11)(22,"label",16),e._uU(23,"Ng\xe0y sinh:"),e.qZA(),e._UZ(24,"input",17),e.qZA(),e.TgZ(25,"div",11)(26,"label",12),e._uU(27,"Email"),e.qZA(),e._UZ(28,"input",18),e.qZA(),e.TgZ(29,"div",11)(30,"label",12),e._uU(31,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"),e.TgZ(32,"span",13),e._uU(33,"(*)"),e.qZA()(),e._UZ(34,"input",19),e.YNc(35,D,2,0,"div",15),e.qZA(),e.TgZ(36,"div",11)(37,"label",12),e._uU(38,"Tr\u1ea1ng th\xe1i"),e.qZA(),e.TgZ(39,"ng-select",20),e.YNc(40,y,2,2,"ng-option",21),e.qZA()(),e.TgZ(41,"div",11)(42,"label",12),e._uU(43,"Lo\u1ea1i Kh\xe1ch h\xe0ng"),e.qZA(),e.TgZ(44,"ng-select",22),e.YNc(45,w,2,2,"ng-option",21),e.qZA()(),e.TgZ(46,"div",11)(47,"label",12),e._uU(48,"Nh\xf3m kh\xe1ch h\xe0ng"),e.qZA(),e.TgZ(49,"ng-select",23),e.YNc(50,I,2,2,"ng-option",21),e.qZA()(),e.TgZ(51,"div",24)(52,"label",12),e._uU(53,"Ch\u1ecdn gi\u1edbi t\xednh"),e.qZA(),e._UZ(54,"br"),e.TgZ(55,"div",25),e._UZ(56,"input",26),e.TgZ(57,"label",27),e._uU(58," Nam "),e.qZA()(),e.TgZ(59,"div",25),e._UZ(60,"input",28),e.TgZ(61,"label",29),e._uU(62," N\u1eef "),e.qZA()(),e.TgZ(63,"div",25),e._UZ(64,"input",30),e.TgZ(65,"label",29),e._uU(66," Kh\xe1c "),e.qZA()()(),e.TgZ(67,"div",11)(68,"label",12),e._uU(69,"T\u1ec9nh th\xe0nh ph\u1ed1"),e.qZA(),e.TgZ(70,"ng-select",31),e.NdJ("change",function(){return n.onProvinceChange()})("ngModelChange",function(a){return n.codeProvince=a}),e.YNc(71,S,2,2,"ng-option",21),e.qZA()(),e.TgZ(72,"div",11)(73,"label",12),e._uU(74,"Ch\u1ecdn Huy\u1ec7n"),e.qZA(),e.TgZ(75,"ng-select",32),e.NdJ("change",function(){return n.onDistrictChange()})("ngModelChange",function(a){return n.codeDistrict=a}),e.YNc(76,J,2,2,"ng-option",21),e.qZA()(),e.YNc(77,O,6,3,"div",33),e.TgZ(78,"div",11)(79,"label",12),e._uU(80,"\u0110\u1ecba ch\u1ec9 c\u1ee5 th\u1ec3"),e.qZA(),e._UZ(81,"textarea",34),e.qZA(),e.TgZ(82,"div",11)(83,"label",12),e._uU(84,"Ghi ch\xfa"),e.qZA(),e._UZ(85,"textarea",35),e.qZA(),e.TgZ(86,"button",36),e._uU(87,"T\u1ea1o m\u1edbi"),e.qZA(),e.TgZ(88,"button",37),e._uU(89,"Tr\u1edf v\u1ec1"),e.qZA()()()()()()),2&t&&(e.xp6(13),e.Q6J("formGroup",n.customersForm),e.xp6(7),e.Q6J("ngIf",n.customersForm.controls.name.invalid&&n.customersForm.controls.name.touched),e.xp6(15),e.Q6J("ngIf",n.customersForm.controls.tel.invalid&&n.customersForm.controls.tel.touched),e.xp6(4),e.Q6J("searchable",!0),e.xp6(1),e.Q6J("ngForOf",n.status),e.xp6(4),e.Q6J("searchable",!0),e.xp6(1),e.Q6J("ngForOf",n.types),e.xp6(4),e.Q6J("searchable",!0),e.xp6(1),e.Q6J("ngForOf",n.GroupsCustomers),e.xp6(20),e.Q6J("searchable",!0)("ngModel",n.codeProvince),e.xp6(1),e.Q6J("ngForOf",n.provinces),e.xp6(4),e.Q6J("searchable",!0)("ngModel",n.codeDistrict),e.xp6(1),e.Q6J("ngForOf",n.districts),e.xp6(1),e.Q6J("ngIf",n.isWardDataLoaded),e.xp6(9),e.Q6J("disabled",n.customersForm.invalid))},dependencies:[c.sg,c.O5,m.rH,m.yS,r._Y,r.Fj,r._,r.JJ,r.JL,r.sg,r.u,d.w9,d.jq]}),o})();function Y(o,i){1&o&&(e.TgZ(0,"div",12)(1,"button",13),e._UZ(2,"span",14),e._uU(3," Loading... "),e.qZA()())}function B(o,i){1&o&&(e.TgZ(0,"div",43),e._uU(1," Kh\xf4ng \u0111\u1ec3 tr\u1ed1ng t\xean kh\xe1ch h\xe0ng "),e.qZA())}function M(o,i){1&o&&(e.TgZ(0,"div",43),e._uU(1," Kh\xf4ng \u0111\u1ec3 tr\u1ed1ng S\u1ed1 \u0111i\u1ec7n tho\u1ea1i "),e.qZA())}function k(o,i){if(1&o&&(e.TgZ(0,"ng-option",44),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function G(o,i){if(1&o&&(e.TgZ(0,"ng-option",44),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function K(o,i){if(1&o&&(e.TgZ(0,"ng-option",44),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function $(o,i){if(1&o&&(e.TgZ(0,"ng-option",44),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function j(o,i){if(1&o&&(e.TgZ(0,"ng-option",44),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function H(o,i){if(1&o&&(e.TgZ(0,"ng-option",44),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function P(o,i){if(1&o&&(e.TgZ(0,"div")(1,"div",16)(2,"label",17),e._uU(3,"Ch\u1ecdn X\xe3"),e.qZA(),e.TgZ(4,"ng-select",45),e.YNc(5,H,2,2,"ng-option",26),e.qZA()()()),2&o){const t=e.oxw(2);e.xp6(4),e.Q6J("searchable",!0),e.xp6(1),e.Q6J("ngForOf",t.wards)}}function W(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"form",15),e.NdJ("ngSubmit",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onSubmit())}),e.TgZ(1,"div",16)(2,"label",17),e._uU(3,"T\xean Kh\xe1ch h\xe0ng"),e.TgZ(4,"span",18),e._uU(5,"(*)"),e.qZA()(),e._UZ(6,"input",19),e.YNc(7,B,2,0,"div",20),e.qZA(),e.TgZ(8,"div",16)(9,"label",21),e._uU(10,"Ng\xe0y sinh:"),e.qZA(),e._UZ(11,"input",22),e.qZA(),e.TgZ(12,"div",16)(13,"label",17),e._uU(14,"Email"),e.qZA(),e._UZ(15,"input",23),e.qZA(),e.TgZ(16,"div",16)(17,"label",17),e._uU(18,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"),e.TgZ(19,"span",18),e._uU(20,"(*)"),e.qZA()(),e._UZ(21,"input",24),e.YNc(22,M,2,0,"div",20),e.qZA(),e.TgZ(23,"div",16)(24,"label",17),e._uU(25,"Tr\u1ea1ng th\xe1i"),e.qZA(),e.TgZ(26,"ng-select",25),e.YNc(27,k,2,2,"ng-option",26),e.qZA()(),e.TgZ(28,"div",16)(29,"label",17),e._uU(30,"Lo\u1ea1i Kh\xe1ch h\xe0ng"),e.qZA(),e.TgZ(31,"ng-select",27),e.YNc(32,G,2,2,"ng-option",26),e.qZA()(),e.TgZ(33,"div",16)(34,"label",17),e._uU(35,"Nh\xf3m kh\xe1ch h\xe0ng"),e.qZA(),e.TgZ(36,"ng-select",28),e.YNc(37,K,2,2,"ng-option",26),e.qZA()(),e.TgZ(38,"div",29)(39,"label",17),e._uU(40,"Ch\u1ecdn gi\u1edbi t\xednh"),e.qZA(),e._UZ(41,"br"),e.TgZ(42,"div",30),e._UZ(43,"input",31),e.TgZ(44,"label",32),e._uU(45," Nam "),e.qZA()(),e.TgZ(46,"div",30),e._UZ(47,"input",33),e.TgZ(48,"label",34),e._uU(49," N\u1eef "),e.qZA()(),e.TgZ(50,"div",30),e._UZ(51,"input",35),e.TgZ(52,"label",34),e._uU(53," Kh\xe1c "),e.qZA()()(),e.TgZ(54,"div",16)(55,"label",17),e._uU(56,"T\u1ec9nh th\xe0nh ph\u1ed1"),e.qZA(),e.TgZ(57,"ng-select",36),e.NdJ("change",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onProvinceChange())}),e.YNc(58,$,2,2,"ng-option",26),e.qZA()(),e.TgZ(59,"div",16)(60,"label",17),e._uU(61,"Ch\u1ecdn Huy\u1ec7n"),e.qZA(),e.TgZ(62,"ng-select",37),e.NdJ("change",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onDistrictChange())}),e.YNc(63,j,2,2,"ng-option",26),e.qZA()(),e.YNc(64,P,6,2,"div",38),e.TgZ(65,"div",16)(66,"label",17),e._uU(67,"\u0110\u1ecba ch\u1ec9 c\u1ee5 th\u1ec3"),e.qZA(),e._UZ(68,"textarea",39),e.qZA(),e.TgZ(69,"div",16)(70,"label",17),e._uU(71,"Ghi ch\xfa"),e.qZA(),e._UZ(72,"textarea",40),e.qZA(),e.TgZ(73,"button",41),e._uU(74,"T\u1ea1o m\u1edbi"),e.qZA(),e.TgZ(75,"button",42),e._uU(76,"Tr\u1edf v\u1ec1"),e.qZA()()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.customersForm),e.xp6(7),e.Q6J("ngIf",t.customersForm.controls.name.invalid&&t.customersForm.controls.name.touched),e.xp6(15),e.Q6J("ngIf",t.customersForm.controls.tel.invalid&&t.customersForm.controls.tel.touched),e.xp6(4),e.Q6J("searchable",!0),e.xp6(1),e.Q6J("ngForOf",t.status),e.xp6(4),e.Q6J("searchable",!0),e.xp6(1),e.Q6J("ngForOf",t.types),e.xp6(4),e.Q6J("searchable",!0),e.xp6(1),e.Q6J("ngForOf",t.GroupsCustomers),e.xp6(20),e.Q6J("searchable",!0),e.xp6(1),e.Q6J("ngForOf",t.provinces),e.xp6(4),e.Q6J("searchable",!0),e.xp6(1),e.Q6J("ngForOf",t.districts),e.xp6(1),e.Q6J("ngIf",t.isWardDataLoaded),e.xp6(9),e.Q6J("disabled",t.customersForm.invalid)}}let X=(()=>{class o{constructor(t,n,s,a,h){this.CustomersService=t,this.GroupCustomersService=n,this.AresService=s,this.router=a,this.route=h,this.isLoading=!1,this.types=[],this.status=[],this.provinces=[],this.districts=[],this.wards=[],this.GroupsCustomers=[],this.isWardDataLoaded=!1,this.provinceChangeSubject=new f.x,this.districtChangeSubject=new f.x,this.customersForm=new r.cw({name:new r.NI("",r.kI.required),type:new r.NI(0),dob:new r.NI(""),group_customer_id:new r.NI(""),province_code:new r.NI(""),district_code:new r.NI(""),ward_code:new r.NI(""),email:new r.NI(""),tel:new r.NI("",r.kI.required),status:new r.NI(1),address_detail:new r.NI(""),note:new r.NI(""),gender:new r.NI(0)})}ngOnInit(){this.types=[{id:0,name:"C\xe1 nh\xe2n"},{id:1,name:"Doanh nghi\u1ec7p"}],this.status=[{id:0,name:"K\xedch ho\u1ea1t"},{id:1,name:"Kh\xf4ng k\xedch ho\u1ea1t"}],this.GroupCustomersService.GetData().subscribe(t=>{this.GroupsCustomers=t.payload}),this.AresService.getProvinces().subscribe(t=>{this.provinces="error"!=t.status?t.results:[{id:0,name:`${t.message}`}]}),this.provinceChangeSubject.pipe((0,g.b)(300),(0,p.w)(t=>this.AresService.getDistricts(t))).subscribe(t=>{this.districts="error"!=t.status?t.results:[{id:0,name:`${t.message}`}]}),this.districtChangeSubject.pipe((0,g.b)(300),(0,p.w)(t=>this.AresService.getWards(t))).subscribe(t=>{this.wards="error"!=t.status?t.results:{id:0,name:`${t.message}`,status:!1},this.isWardDataLoaded="error"!=t.status,this.wards&&0!=this.wards.status?(this.customersForm?.get("ward_code")?.setValidators(r.kI.required),this.customersForm?.get("ward_code")?.updateValueAndValidity()):(console.log(this.wards),this.customersForm.value.ward_code="")}),this.route.paramMap.subscribe(t=>{const n=t.get("id");null!==n?(this.id=n,this.isLoading=!0,this.CustomersService.GetOneRecord(n).subscribe(s=>{const a=s.payload;a.gender=String(a.gender),this.customersForm.patchValue(a),this.onProvinceChange(),this.onDistrictChange(),this.isLoading=!1},s=>{l().fire("L\u1ed7i!","C\xf3 l\u1ed7i x\u1ea3y ra khi g\u1eedi d\u1eef li\u1ec7u.","error")})):this.router.navigate(["../customers/list"])})}onProvinceChange(){this.provinceChangeSubject.next(Number(this.customersForm.value.province_code))}onDistrictChange(){this.districtChangeSubject.next(Number(this.customersForm.value.district_code))}onSubmit(){if(this.customersForm.valid){const t={...this.customersForm.value,name:String(this.customersForm.value.name),type:Number(this.customersForm.value.type)||null,dob:String(this.customersForm.value.dob)||null,group_customer_id:Number(this.customersForm.value.group_customer_id)||null,province_code:Number(this.customersForm.value.province_code)||null,gender:Number(this.customersForm.value.gender),district_code:Number(this.customersForm.value.district_code)||null,email:String(this.customersForm.value.email)||null,tel:String(this.customersForm.value.tel),status:Number(this.customersForm.value.status),address_detail:String(this.customersForm.value.address_detail)||null,note:String(this.customersForm.value.note)||null,ward_code:Number(this.customersForm.value.ward_code)||null,updated_at:(new Date).toISOString(),id:this.id};this.CustomersService.update(t).subscribe(n=>{if(1==n.status)this.customersForm.reset(),l().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,title:"Th\xe0nh c\xf4ng!",text:"C\u1eadp nh\u1eadt kh\xe1ch h\xe0ng th\xe0nh c\xf4ng",icon:"success",timerProgressBar:!0,didOpen:s=>{s.addEventListener("mouseenter",l().stopTimer),s.addEventListener("mouseleave",l().resumeTimer)}}),this.router.navigate(["../customers/list"]);else{console.log(n);const s=[];for(const a in n.meta.errors){const h=n.meta.errors[a];for(const _ of h)s.push(`${a}: ${_}`)}this.showNextMessage(s)}},n=>{l().fire("L\u1ed7i!","C\xf3 l\u1ed7i x\u1ea3y ra khi g\u1eedi d\u1eef li\u1ec7u.","error")})}else alert("Kh\xf4ng \u0111\u1ec3 tr\u1ed1ng")}showNextMessage(t){if(t.length>0){const n=t.shift();l().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,title:"Th\u1ea5t b\u1ea1i!",text:n,icon:"error",timerProgressBar:!0,didOpen:s=>{s.addEventListener("mouseenter",l().stopTimer),s.addEventListener("mouseleave",l().resumeTimer)},didClose:()=>{this.showNextMessage(t)}})}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C.v),e.Y36(b.m),e.Y36(Z.M),e.Y36(m.F0),e.Y36(m.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-edit"]],decls:15,vars:2,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","grid-margin","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title"],["class","loadingcustomcss",4,"ngIf"],["class","forms-sample",3,"formGroup","ngSubmit",4,"ngIf"],[1,"loadingcustomcss"],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-grow","spinner-grow-sm"],[1,"forms-sample",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","exampleInputUsername1",1,"form-label"],[1,"text-danger"],["type","text","id","exampleInputUsername1","formControlName","name","autocomplete","off","placeholder","Nh\u1eadp t\xean kh\xe1ch h\xe0ng",1,"form-control"],["class","alert alert-danger mt-2",4,"ngIf"],[1,"form-label"],["type","date","formControlName","dob","placeholder","dd/mm/yyyy",1,"form-control","mb-4","mb-md-0"],["type","email","id","exampleInputUsername1","formControlName","email","autocomplete","off","placeholder","Nh\u1eadp email",1,"form-control"],["type","text","id","exampleInputUsername1","formControlName","tel","autocomplete","off","placeholder","Nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i",1,"form-control"],["formControlName","status","placeholder","Ch\u1ecdn Tr\u1ea1ng th\xe1i",3,"searchable"],[3,"value",4,"ngFor","ngForOf"],["formControlName","type","placeholder","Ch\u1ecdn Ki\u1ec3u b\u1ea3o h\xe0nh",3,"searchable"],["formControlName","group_customer_id","placeholder","Ch\u1ecdn Nh\xf3m kh\xe1ch h\xe0ng",3,"searchable"],[1,"mb-4"],[1,"form-check","form-check-inline"],["type","radio","formControlName","gender","value","0","id","radioInline",1,"form-check-input"],["for","radioInline",1,"form-check-label"],["type","radio","formControlName","gender","value","1","id","radioInline1",1,"form-check-input"],["for","radioInline1",1,"form-check-label"],["type","radio","formControlName","gender","value","2","id","radioInline1",1,"form-check-input"],["formControlName","province_code","placeholder","Ch\u1ecdn T\u1ec9nh",3,"searchable","change"],["formControlName","district_code","placeholder","Ch\u1ecdn T\u1ec9nh",3,"searchable","change"],[4,"ngIf"],["id","exampleFormControlTextarea1","placeholder","Nh\u1eadp \u0111\u1ecba ch\u1ec9","formControlName","address_detail","rows","5",1,"form-control"],["id","exampleFormControlTextarea1","placeholder","Nh\u1eadp ghi ch\xfa","formControlName","note","rows","5",1,"form-control"],["type","submit",1,"btn","btn-primary","me-2",3,"disabled"],["routerLink","/customers/list",1,"btn","btn-secondary"],[1,"alert","alert-danger","mt-2"],[3,"value"],["formControlName","ward_code","placeholder","Ch\u1ecdn X\xe3",3,"searchable"]],template:function(t,n){1&t&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._uU(4,"Danh m\u1ee5c"),e.qZA()(),e.TgZ(5,"li",4),e._uU(6,"C\u1eadp nh\u1eadt danh m\u1ee5c"),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"h6",9),e._uU(12,"C\u1eadp nh\u1eadt danh m\u1ee5c"),e.qZA(),e.YNc(13,Y,4,0,"div",10),e.YNc(14,W,77,15,"form",11),e.qZA()()()()),2&t&&(e.xp6(13),e.Q6J("ngIf",n.isLoading),e.xp6(1),e.Q6J("ngIf",!n.isLoading))},dependencies:[c.sg,c.O5,m.rH,m.yS,r._Y,r.Fj,r._,r.JJ,r.JL,r.sg,r.u,d.w9,d.jq],styles:[".loadingcustomcss[_ngcontent-%COMP%]{width:100%;min-height:600px;display:flex;align-items:center;justify-content:center}"]}),o})(),V=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-customers"]],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"router-outlet")},dependencies:[m.lC],encapsulation:2}),o})();var R=u(1094),z=u(9585),ee=u(9628),te=u(907),oe=u(4826),ne=u(5351),re=u(6134);const ie=[{path:"",component:V,children:[{path:"list",component:F},{path:"edit/:id",component:X},{path:"create",component:L}]}];let se=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[c.ez,m.Bz.forChild(ie),z.xD,ee.L,te.dD,oe.bB,ne.bQ.forRoot({animation:150,ghostClass:"bg-light"}),re.ii.forRoot(),r.UX,d.A0,r.u5,R.yI.forRoot({validation:!0})]}),o})()}}]);