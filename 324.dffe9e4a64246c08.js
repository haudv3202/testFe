"use strict";(self.webpackChunknobleui_angular=self.webpackChunknobleui_angular||[]).push([[324],{324:(ue,E,u)=>{u.r(E),u.d(E,{SuppliersModule:()=>se});var m=u(6895),e=u(4650),c=u(265);let T=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-suppliers"]],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"router-outlet")},dependencies:[c.lC],encapsulation:2}),r})();var _=u(2366),A=u(9751),x=u(9646),N=u(5226),a=u.n(N),C=u(1006);const F=function(r){return["../edit",r]};function U(r,o){if(1&r&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td")(10,"a",14),e._uU(11,"S\u1eeda"),e.qZA(),e.TgZ(12,"button",15),e._uU(13,"X\xf3a"),e.qZA()()()),2&r){const t=o.$implicit;e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.tel),e.xp6(2),e.Oqu(0==t.type?"C\xe1 nh\xe2n":"Doanh nghi\u1ec7p"),e.xp6(2),e.Q6J("routerLink",e.VKq(6,F,t.id)),e.xp6(2),e.s9C("id",t.id)}}let q=(()=>{class r{constructor(t){this.SuppliersService=t,this.Customers=new A.y}ngOnInit(){this.refreshCategories()}ngAfterViewInit(){this.Customers.subscribe(()=>{setTimeout(()=>{new _.w("#dataTableExample").on("datatable.init",()=>{this.addDeleteEventHandlers()})},0)})}addDeleteEventHandlers(){const t=document.getElementsByClassName("btn-danger");Array.from(t).forEach(n=>{n.addEventListener("click",s=>{const l=s.target.getAttribute("id");this.deleteCategory(Number(l))})})}deleteCategory(t){a().fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a?",text:"B\u1ea1n s\u1ebd kh\xf4ng th\u1ec3 ho\xe0n t\xe1c l\u1ea1i h\xe0nh \u0111\u1ed9ng n\xe0y!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"C\xf3, x\xf3a n\xf3!"}).then(n=>{n.isConfirmed&&this.SuppliersService.delete(t).subscribe(s=>{a().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,title:"Th\xe0nh c\xf4ng!",text:"Danh m\u1ee5c b\u1ea3o h\xe0nh c\u1ee7a b\u1ea1n \u0111\xe3 \u0111\u01b0\u1ee3c x\xf3a.",icon:"success",timerProgressBar:!0,didOpen:l=>{l.addEventListener("mouseenter",a().stopTimer),l.addEventListener("mouseleave",a().resumeTimer)}}),location.reload()},s=>{a().fire("L\u1ed7i!","C\xf3 l\u1ed7i x\u1ea3y ra khi x\xf3a danh m\u1ee5c.","error")})})}refreshCategories(){this.SuppliersService.GetData().subscribe(t=>{console.log(t),1==t.status&&(this.Customers=(0,x.of)(t.payload),this.Customers.subscribe(n=>{setTimeout(()=>{new _.w("#dataTableExample").on("datatable.init",()=>{this.addDeleteEventHandlers()})},0)}))},t=>{a().fire("L\u1ed7i!","C\xf3 l\u1ed7i x\u1ea3y ra khi x\xf3a danh m\u1ee5c.","error")})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(C.R))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-list"]],decls:40,vars:3,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title"],["routerLink","/suppliers/create","type","button",1,"btn","btn-primary"],[1,"table-responsive"],["id","dataTableExample",1,"table"],[4,"ngFor","ngForOf"],[1,"btn","btn-success","mx-2",3,"routerLink"],[1,"btn","btn-danger",3,"id"]],template:function(t,n){1&t&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._uU(4,"Kh\xe1ch h\xe0ng"),e.qZA()(),e.TgZ(5,"li",4),e._uU(6,"Danh m\u1ee5c kh\xe1ch h\xe0ng"),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"h6",9),e._uU(12,"Qu\u1ea3n l\xed Kh\xe1ch h\xe0ng"),e.qZA(),e.TgZ(13,"button",10),e._uU(14,"Th\xeam m\u1edbi"),e.qZA(),e.TgZ(15,"div",11)(16,"table",12)(17,"thead")(18,"tr")(19,"th"),e._uU(20,"ID"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"T\xcaN KH\xc1CH H\xc0NG"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"THU\u1ed8C LO\u1ea0I"),e.qZA(),e.TgZ(27,"th"),e._uU(28,"H\xc0NH \u0110\u1ed8NG"),e.qZA()()(),e.TgZ(29,"tbody"),e.YNc(30,U,14,8,"tr",13),e.ALo(31,"async"),e.qZA(),e.TgZ(32,"tfoot")(33,"tr"),e._UZ(34,"th")(35,"th")(36,"th")(37,"th")(38,"th")(39,"th"),e.qZA()()()()()()()()),2&t&&(e.xp6(30),e.Q6J("ngForOf",e.lcZ(31,1,n.Customers)))},dependencies:[m.sg,c.rH,c.yS,m.Ov]}),r})();var i=u(433),h=u(8372),g=u(3900),f=u(7579),b=u(5302),Z=u(8489),d=u(8796);function S(r,o){1&r&&(e.TgZ(0,"div",29),e._uU(1," Kh\xf4ng \u0111\u1ec3 tr\u1ed1ng t\xean kh\xe1ch h\xe0ng "),e.qZA())}function D(r,o){1&r&&(e.TgZ(0,"div",29),e._uU(1," Kh\xf4ng \u0111\u1ec3 tr\u1ed1ng S\u1ed1 \u0111i\u1ec7n tho\u1ea1i "),e.qZA())}function w(r,o){if(1&r&&(e.TgZ(0,"ng-option",30),e._uU(1),e.qZA()),2&r){const t=o.$implicit;e.Q6J("value",+t.id),e.xp6(1),e.Oqu(t.name)}}function y(r,o){if(1&r&&(e.TgZ(0,"ng-option",30),e._uU(1),e.qZA()),2&r){const t=o.$implicit;e.Q6J("value",+t.id),e.xp6(1),e.Oqu(t.name)}}function J(r,o){if(1&r&&(e.TgZ(0,"ng-option",30),e._uU(1),e.qZA()),2&r){const t=o.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function I(r,o){if(1&r&&(e.TgZ(0,"ng-option",30),e._uU(1),e.qZA()),2&r){const t=o.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Q(r,o){if(1&r&&(e.TgZ(0,"ng-option",30),e._uU(1),e.qZA()),2&r){const t=o.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function L(r,o){if(1&r&&(e.TgZ(0,"ng-option",30),e._uU(1),e.qZA()),2&r){const t=o.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function O(r,o){if(1&r&&(e.TgZ(0,"div")(1,"div",11)(2,"label",12),e._uU(3,"Ch\u1ecdn X\xe3"),e.qZA(),e.TgZ(4,"ng-select",31),e.YNc(5,L,2,2,"ng-option",19),e.qZA()()()),2&r){const t=e.oxw();e.xp6(4),e.Q6J("searchable",!0),e.xp6(1),e.Q6J("ngForOf",t.wards)}}let Y=(()=>{class r{constructor(t,n,s,l){this.SuppliersService=t,this.GroupSuppliersService=n,this.AresService=s,this.router=l,this.types=[],this.GroupsCustomers=[],this.provinceChangeSubject=new f.x,this.districtChangeSubject=new f.x,this.provinces=[],this.districts=[],this.wards=[],this.status=[],this.isWardDataLoaded=!1,this.customersForm=new i.cw({name:new i.NI("",i.kI.required),type:new i.NI(1),group_supplier_id:new i.NI(""),province_code:new i.NI(""),district_code:new i.NI(""),ward_code:new i.NI(""),email:new i.NI(""),tel:new i.NI("",i.kI.required),status:new i.NI(1),address_detail:new i.NI(""),note:new i.NI("")})}ngOnInit(){this.types=[{id:0,name:"C\xe1 nh\xe2n"},{id:1,name:"Doanh nghi\u1ec7p"}],this.status=[{id:0,name:"K\xedch ho\u1ea1t"},{id:1,name:"Kh\xf4ng k\xedch ho\u1ea1t"}],this.GroupSuppliersService.GetData().subscribe(t=>{this.GroupsCustomers=t.payload.data}),this.AresService.getProvinces().subscribe(t=>{this.provinces="error"!=t.status?t.results:[{id:0,name:`${t.message}`}]}),this.provinceChangeSubject.pipe((0,h.b)(300),(0,g.w)(t=>this.AresService.getDistricts(t))).subscribe(t=>{this.districts="error"!=t.status?t.results:[{id:0,name:`${t.message}`}]}),this.districtChangeSubject.pipe((0,h.b)(300),(0,g.w)(t=>this.AresService.getWards(t))).subscribe(t=>{this.wards="error"!=t.status?t.results:{id:0,name:`${t.message}`,status:!1},this.isWardDataLoaded="error"!=t.status})}onProvinceChange(){this.provinceChangeSubject.next(Number(this.customersForm.value.province_code))}onDistrictChange(){this.districtChangeSubject.next(Number(this.customersForm.value.district_code))}onSubmit(){if(this.customersForm.valid){const t={name:String(this.customersForm.value.name),type:Number(this.customersForm.value.type)||null,group_customer_id:Number(this.customersForm.value.group_supplier_id)||null,province_code:Number(this.customersForm.value.province_code)||null,district_code:Number(this.customersForm.value.district_code)||null,email:String(this.customersForm.value.email)||null,tel:String(this.customersForm.value.tel),status:Number(this.customersForm.value.status),address_detail:String(this.customersForm.value.address_detail)||null,note:String(this.customersForm.value.note)||null,ward_code:Number(this.customersForm.value.ward_code)||null,created_at:new Date,updated_at:null};console.log(t),this.SuppliersService.create(t).subscribe(n=>{if(1==n.status)this.customersForm.reset(),a().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,title:"Th\xe0nh c\xf4ng!",text:"Th\xeam kh\xe1ch h\xe0ng th\xe0nh c\xf4ng",icon:"success",timerProgressBar:!0,didOpen:s=>{s.addEventListener("mouseenter",a().stopTimer),s.addEventListener("mouseleave",a().resumeTimer)}}),this.router.navigate(["../suppliers/list"]);else{console.log(n);const s=[];for(const l in n.meta.errors){const p=n.meta.errors[l];for(const v of p)s.push(`${l}: ${v}`)}this.showNextMessage(s)}},n=>{console.log(n),a().fire("L\u1ed7i!","C\xf3 l\u1ed7i x\u1ea3y ra khi g\u1eedi d\u1eef li\u1ec7u.","error")})}else alert("Kh\xf4ng \u0111\u1ec3 tr\u1ed1ng")}showNextMessage(t){if(t.length>0){const n=t.shift();a().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,title:"Th\u1ea5t b\u1ea1i!",text:n,icon:"error",timerProgressBar:!0,didOpen:s=>{s.addEventListener("mouseenter",a().stopTimer),s.addEventListener("mouseleave",a().resumeTimer)},didClose:()=>{this.showNextMessage(t)}})}}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(C.R),e.Y36(b.r),e.Y36(Z.M),e.Y36(c.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-create"]],decls:70,vars:15,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","grid-margin","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"forms-sample",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","exampleInputUsername1",1,"form-label"],[1,"text-danger"],["type","text","id","exampleInputUsername1","formControlName","name","autocomplete","off","placeholder","Nh\u1eadp t\xean kh\xe1ch h\xe0ng",1,"form-control"],["class","alert alert-danger mt-2",4,"ngIf"],["type","email","id","exampleInputUsername1","formControlName","email","autocomplete","off","placeholder","Nh\u1eadp email",1,"form-control"],["type","text","id","exampleInputUsername1","formControlName","tel","autocomplete","off","placeholder","Nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i",1,"form-control"],["formControlName","status","placeholder","Ch\u1ecdn Tr\u1ea1ng th\xe1i",3,"searchable"],[3,"value",4,"ngFor","ngForOf"],["formControlName","type","placeholder","Ch\u1ecdn lo\u1ea1i kh\xe1ch h\xe0ng",3,"searchable"],["formControlName","group_supplier_id","placeholder","Ch\u1ecdn Nh\xf3m kh\xe1ch h\xe0ng",3,"searchable"],["formControlName","province_code","placeholder","Ch\u1ecdn T\u1ec9nh",3,"searchable","change"],["formControlName","district_code","placeholder","Ch\u1ecdn T\u1ec9nh",3,"searchable","change"],[4,"ngIf"],["id","exampleFormControlTextarea1","placeholder","Nh\u1eadp \u0111\u1ecba ch\u1ec9","formControlName","address_detail","rows","5",1,"form-control"],["id","exampleFormControlTextarea1","placeholder","Nh\u1eadp ghi ch\xfa","formControlName","note","rows","5",1,"form-control"],["type","submit",1,"btn","btn-primary","me-2",3,"disabled"],["routerLink","/suppliers/list",1,"btn","btn-secondary"],[1,"alert","alert-danger","mt-2"],[3,"value"],["formControlName","ward_code","placeholder","Ch\u1ecdn X\xe3",3,"searchable"]],template:function(t,n){1&t&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._uU(4,"Danh m\u1ee5c"),e.qZA()(),e.TgZ(5,"li",4),e._uU(6,"Th\xeam m\u1edbi danh m\u1ee5c"),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"h6",9),e._uU(12,"Th\xeam m\u1edbi Danh m\u1ee5c"),e.qZA(),e.TgZ(13,"form",10),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(14,"div",11)(15,"label",12),e._uU(16,"T\xean Kh\xe1ch h\xe0ng"),e.TgZ(17,"span",13),e._uU(18,"(*)"),e.qZA()(),e._UZ(19,"input",14),e.YNc(20,S,2,0,"div",15),e.qZA(),e.TgZ(21,"div",11)(22,"label",12),e._uU(23,"Email"),e.qZA(),e._UZ(24,"input",16),e.qZA(),e.TgZ(25,"div",11)(26,"label",12),e._uU(27,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"),e.TgZ(28,"span",13),e._uU(29,"(*)"),e.qZA()(),e._UZ(30,"input",17),e.YNc(31,D,2,0,"div",15),e.qZA(),e.TgZ(32,"div",11)(33,"label",12),e._uU(34,"Tr\u1ea1ng th\xe1i"),e.qZA(),e.TgZ(35,"ng-select",18),e.YNc(36,w,2,2,"ng-option",19),e.qZA()(),e.TgZ(37,"div",11)(38,"label",12),e._uU(39,"Lo\u1ea1i Kh\xe1ch h\xe0ng"),e.qZA(),e.TgZ(40,"ng-select",20),e.YNc(41,y,2,2,"ng-option",19),e.qZA()(),e.TgZ(42,"div",11)(43,"label",12),e._uU(44,"Nh\xf3m kh\xe1ch h\xe0ng"),e.qZA(),e.TgZ(45,"ng-select",21),e.YNc(46,J,2,2,"ng-option",19),e.qZA()(),e.TgZ(47,"div",11)(48,"label",12),e._uU(49,"T\u1ec9nh th\xe0nh ph\u1ed1"),e.qZA(),e.TgZ(50,"ng-select",22),e.NdJ("change",function(){return n.onProvinceChange()}),e.YNc(51,I,2,2,"ng-option",19),e.qZA()(),e.TgZ(52,"div",11)(53,"label",12),e._uU(54,"Ch\u1ecdn Huy\u1ec7n"),e.qZA(),e.TgZ(55,"ng-select",23),e.NdJ("change",function(){return n.onDistrictChange()}),e.YNc(56,Q,2,2,"ng-option",19),e.qZA()(),e.YNc(57,O,6,2,"div",24),e.TgZ(58,"div",11)(59,"label",12),e._uU(60,"\u0110\u1ecba ch\u1ec9 c\u1ee5 th\u1ec3"),e.qZA(),e._UZ(61,"textarea",25),e.qZA(),e.TgZ(62,"div",11)(63,"label",12),e._uU(64,"Ghi ch\xfa"),e.qZA(),e._UZ(65,"textarea",26),e.qZA(),e.TgZ(66,"button",27),e._uU(67,"T\u1ea1o m\u1edbi"),e.qZA(),e.TgZ(68,"button",28),e._uU(69,"Tr\u1edf v\u1ec1"),e.qZA()()()()()()),2&t&&(e.xp6(13),e.Q6J("formGroup",n.customersForm),e.xp6(7),e.Q6J("ngIf",n.customersForm.controls.name.invalid&&n.customersForm.controls.name.touched),e.xp6(11),e.Q6J("ngIf",n.customersForm.controls.tel.invalid&&n.customersForm.controls.tel.touched),e.xp6(4),e.Q6J("searchable",!0),e.xp6(1),e.Q6J("ngForOf",n.status),e.xp6(4),e.Q6J("searchable",!0),e.xp6(1),e.Q6J("ngForOf",n.types),e.xp6(4),e.Q6J("searchable",!0),e.xp6(1),e.Q6J("ngForOf",n.GroupsCustomers),e.xp6(4),e.Q6J("searchable",!0),e.xp6(1),e.Q6J("ngForOf",n.provinces),e.xp6(4),e.Q6J("searchable",!0),e.xp6(1),e.Q6J("ngForOf",n.districts),e.xp6(1),e.Q6J("ngIf",n.isWardDataLoaded),e.xp6(9),e.Q6J("disabled",n.customersForm.invalid))},dependencies:[m.sg,m.O5,c.rH,c.yS,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,d.w9,d.jq]}),r})();function B(r,o){1&r&&(e.TgZ(0,"div",12)(1,"button",13),e._UZ(2,"span",14),e._uU(3," Loading... "),e.qZA()())}function G(r,o){1&r&&(e.TgZ(0,"div",34),e._uU(1," Kh\xf4ng \u0111\u1ec3 tr\u1ed1ng t\xean kh\xe1ch h\xe0ng "),e.qZA())}function $(r,o){1&r&&(e.TgZ(0,"div",34),e._uU(1," Kh\xf4ng \u0111\u1ec3 tr\u1ed1ng S\u1ed1 \u0111i\u1ec7n tho\u1ea1i "),e.qZA())}function K(r,o){if(1&r&&(e.TgZ(0,"ng-option",35),e._uU(1),e.qZA()),2&r){const t=o.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function j(r,o){if(1&r&&(e.TgZ(0,"ng-option",35),e._uU(1),e.qZA()),2&r){const t=o.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function k(r,o){if(1&r&&(e.TgZ(0,"ng-option",35),e._uU(1),e.qZA()),2&r){const t=o.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function H(r,o){if(1&r&&(e.TgZ(0,"ng-option",35),e._uU(1),e.qZA()),2&r){const t=o.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function M(r,o){if(1&r&&(e.TgZ(0,"ng-option",35),e._uU(1),e.qZA()),2&r){const t=o.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function P(r,o){if(1&r&&(e.TgZ(0,"ng-option",35),e._uU(1),e.qZA()),2&r){const t=o.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function X(r,o){if(1&r&&(e.TgZ(0,"div")(1,"div",16)(2,"label",17),e._uU(3,"Ch\u1ecdn X\xe3"),e.qZA(),e.TgZ(4,"ng-select",36),e.YNc(5,P,2,2,"ng-option",24),e.qZA()()()),2&r){const t=e.oxw(2);e.xp6(4),e.Q6J("searchable",!0),e.xp6(1),e.Q6J("ngForOf",t.wards)}}function W(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"form",15),e.NdJ("ngSubmit",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onSubmit())}),e.TgZ(1,"div",16)(2,"label",17),e._uU(3,"T\xean Kh\xe1ch h\xe0ng"),e.TgZ(4,"span",18),e._uU(5,"(*)"),e.qZA()(),e._UZ(6,"input",19),e.YNc(7,G,2,0,"div",20),e.qZA(),e.TgZ(8,"div",16)(9,"label",17),e._uU(10,"Email"),e.qZA(),e._UZ(11,"input",21),e.qZA(),e.TgZ(12,"div",16)(13,"label",17),e._uU(14,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"),e.TgZ(15,"span",18),e._uU(16,"(*)"),e.qZA()(),e._UZ(17,"input",22),e.YNc(18,$,2,0,"div",20),e.qZA(),e.TgZ(19,"div",16)(20,"label",17),e._uU(21,"Tr\u1ea1ng th\xe1i"),e.qZA(),e.TgZ(22,"ng-select",23),e.YNc(23,K,2,2,"ng-option",24),e.qZA()(),e.TgZ(24,"div",16)(25,"label",17),e._uU(26,"Lo\u1ea1i Kh\xe1ch h\xe0ng"),e.qZA(),e.TgZ(27,"ng-select",25),e.YNc(28,j,2,2,"ng-option",24),e.qZA()(),e.TgZ(29,"div",16)(30,"label",17),e._uU(31,"Nh\xf3m kh\xe1ch h\xe0ng"),e.qZA(),e.TgZ(32,"ng-select",26),e.YNc(33,k,2,2,"ng-option",24),e.qZA()(),e.TgZ(34,"div",16)(35,"label",17),e._uU(36,"T\u1ec9nh th\xe0nh ph\u1ed1"),e.qZA(),e.TgZ(37,"ng-select",27),e.NdJ("change",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onProvinceChange())}),e.YNc(38,H,2,2,"ng-option",24),e.qZA()(),e.TgZ(39,"div",16)(40,"label",17),e._uU(41,"Ch\u1ecdn Huy\u1ec7n"),e.qZA(),e.TgZ(42,"ng-select",28),e.NdJ("change",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onDistrictChange())}),e.YNc(43,M,2,2,"ng-option",24),e.qZA()(),e.YNc(44,X,6,2,"div",29),e.TgZ(45,"div",16)(46,"label",17),e._uU(47,"\u0110\u1ecba ch\u1ec9 c\u1ee5 th\u1ec3"),e.qZA(),e._UZ(48,"textarea",30),e.qZA(),e.TgZ(49,"div",16)(50,"label",17),e._uU(51,"Ghi ch\xfa"),e.qZA(),e._UZ(52,"textarea",31),e.qZA(),e.TgZ(53,"button",32),e._uU(54,"T\u1ea1o m\u1edbi"),e.qZA(),e.TgZ(55,"button",33),e._uU(56,"Tr\u1edf v\u1ec1"),e.qZA()()}if(2&r){const t=e.oxw();e.Q6J("formGroup",t.customersForm),e.xp6(7),e.Q6J("ngIf",t.customersForm.controls.name.invalid&&t.customersForm.controls.name.touched),e.xp6(11),e.Q6J("ngIf",t.customersForm.controls.tel.invalid&&t.customersForm.controls.tel.touched),e.xp6(4),e.Q6J("searchable",!0),e.xp6(1),e.Q6J("ngForOf",t.status),e.xp6(4),e.Q6J("searchable",!0),e.xp6(1),e.Q6J("ngForOf",t.types),e.xp6(4),e.Q6J("searchable",!0),e.xp6(1),e.Q6J("ngForOf",t.GroupsCustomers),e.xp6(4),e.Q6J("searchable",!0),e.xp6(1),e.Q6J("ngForOf",t.provinces),e.xp6(4),e.Q6J("searchable",!0),e.xp6(1),e.Q6J("ngForOf",t.districts),e.xp6(1),e.Q6J("ngIf",t.isWardDataLoaded),e.xp6(9),e.Q6J("disabled",t.customersForm.invalid)}}let R=(()=>{class r{constructor(t,n,s,l,p){this.SuppliersService=t,this.GroupSuppliersService=n,this.AresService=s,this.router=l,this.route=p,this.isLoading=!1,this.types=[],this.status=[],this.provinces=[],this.districts=[],this.wards=[],this.GroupsCustomers=[],this.isWardDataLoaded=!1,this.provinceChangeSubject=new f.x,this.districtChangeSubject=new f.x,this.customersForm=new i.cw({name:new i.NI("",i.kI.required),type:new i.NI(1),group_supplier_id:new i.NI(""),province_code:new i.NI(""),district_code:new i.NI(""),ward_code:new i.NI(""),email:new i.NI(""),tel:new i.NI("",i.kI.required),status:new i.NI(1),address_detail:new i.NI(""),note:new i.NI("")})}ngOnInit(){this.types=[{id:0,name:"C\xe1 nh\xe2n"},{id:1,name:"Doanh nghi\u1ec7p"}],this.status=[{id:0,name:"K\xedch ho\u1ea1t"},{id:1,name:"Kh\xf4ng k\xedch ho\u1ea1t"}],this.GroupSuppliersService.GetData().subscribe(t=>{this.GroupsCustomers=t.payload.data}),this.AresService.getProvinces().subscribe(t=>{this.provinces="error"!=t.status?t.results:[{id:0,name:`${t.message}`}]}),this.provinceChangeSubject.pipe((0,h.b)(300),(0,g.w)(t=>this.AresService.getDistricts(t))).subscribe(t=>{this.districts="error"!=t.status?t.results:[{id:0,name:`${t.message}`}]}),this.districtChangeSubject.pipe((0,h.b)(300),(0,g.w)(t=>this.AresService.getWards(t))).subscribe(t=>{this.wards="error"!=t.status?t.results:{id:0,name:`${t.message}`,status:!1},this.isWardDataLoaded="error"!=t.status,this.wards&&0!=this.wards.status?(this.customersForm?.get("ward_code")?.setValidators(i.kI.required),this.customersForm?.get("ward_code")?.updateValueAndValidity()):(console.log(this.wards),this.customersForm.value.ward_code="")}),this.route.paramMap.subscribe(t=>{const n=t.get("id");null!==n?(this.id=n,this.isLoading=!0,this.SuppliersService.GetOneRecord(n).subscribe(s=>{const l=s.payload;l.gender=String(l.gender),this.customersForm.patchValue(l),this.onProvinceChange(),this.onDistrictChange(),this.isLoading=!1},s=>{a().fire("L\u1ed7i!","C\xf3 l\u1ed7i x\u1ea3y ra khi g\u1eedi d\u1eef li\u1ec7u.","error")})):this.router.navigate(["../suppliers/list"])})}onProvinceChange(){this.provinceChangeSubject.next(Number(this.customersForm.value.province_code))}onDistrictChange(){this.districtChangeSubject.next(Number(this.customersForm.value.district_code))}onSubmit(){if(this.customersForm.valid){const t={...this.customersForm.value,name:String(this.customersForm.value.name),type:Number(this.customersForm.value.type)||null,group_customer_id:Number(this.customersForm.value.group_supplier_id)||null,province_code:Number(this.customersForm.value.province_code)||null,district_code:Number(this.customersForm.value.district_code)||null,email:String(this.customersForm.value.email)||null,tel:String(this.customersForm.value.tel),status:Number(this.customersForm.value.status),address_detail:String(this.customersForm.value.address_detail)||null,note:String(this.customersForm.value.note)||null,ward_code:Number(this.customersForm.value.ward_code)||null,updated_at:(new Date).toISOString(),id:this.id};this.SuppliersService.update(t).subscribe(n=>{if(1==n.status)this.customersForm.reset(),a().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,title:"Th\xe0nh c\xf4ng!",text:"C\u1eadp nh\u1eadt kh\xe1ch h\xe0ng th\xe0nh c\xf4ng",icon:"success",timerProgressBar:!0,didOpen:s=>{s.addEventListener("mouseenter",a().stopTimer),s.addEventListener("mouseleave",a().resumeTimer)}}),this.router.navigate(["../suppliers/list"]);else{console.log(n);const s=[];for(const l in n.meta.errors){const p=n.meta.errors[l];for(const v of p)s.push(`${l}: ${v}`)}this.showNextMessage(s)}},n=>{a().fire("L\u1ed7i!","C\xf3 l\u1ed7i x\u1ea3y ra khi g\u1eedi d\u1eef li\u1ec7u.","error")})}else alert("Kh\xf4ng \u0111\u1ec3 tr\u1ed1ng")}showNextMessage(t){if(t.length>0){const n=t.shift();a().fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,title:"Th\u1ea5t b\u1ea1i!",text:n,icon:"error",timerProgressBar:!0,didOpen:s=>{s.addEventListener("mouseenter",a().stopTimer),s.addEventListener("mouseleave",a().resumeTimer)},didClose:()=>{this.showNextMessage(t)}})}}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(C.R),e.Y36(b.r),e.Y36(Z.M),e.Y36(c.F0),e.Y36(c.gz))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-edit"]],decls:15,vars:2,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","grid-margin","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title"],["class","loadingcustomcss",4,"ngIf"],["class","forms-sample",3,"formGroup","ngSubmit",4,"ngIf"],[1,"loadingcustomcss"],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-grow","spinner-grow-sm"],[1,"forms-sample",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","exampleInputUsername1",1,"form-label"],[1,"text-danger"],["type","text","id","exampleInputUsername1","formControlName","name","autocomplete","off","placeholder","Nh\u1eadp t\xean kh\xe1ch h\xe0ng",1,"form-control"],["class","alert alert-danger mt-2",4,"ngIf"],["type","email","id","exampleInputUsername1","formControlName","email","autocomplete","off","placeholder","Nh\u1eadp email",1,"form-control"],["type","text","id","exampleInputUsername1","formControlName","tel","autocomplete","off","placeholder","Nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i",1,"form-control"],["formControlName","status","placeholder","Ch\u1ecdn Tr\u1ea1ng th\xe1i",3,"searchable"],[3,"value",4,"ngFor","ngForOf"],["formControlName","type","placeholder","Ch\u1ecdn Ki\u1ec3u b\u1ea3o h\xe0nh",3,"searchable"],["formControlName","group_supplier_id","placeholder","Ch\u1ecdn Nh\xf3m kh\xe1ch h\xe0ng",3,"searchable"],["formControlName","province_code","placeholder","Ch\u1ecdn T\u1ec9nh",3,"searchable","change"],["formControlName","district_code","placeholder","Ch\u1ecdn T\u1ec9nh",3,"searchable","change"],[4,"ngIf"],["id","exampleFormControlTextarea1","placeholder","Nh\u1eadp \u0111\u1ecba ch\u1ec9","formControlName","address_detail","rows","5",1,"form-control"],["id","exampleFormControlTextarea1","placeholder","Nh\u1eadp ghi ch\xfa","formControlName","note","rows","5",1,"form-control"],["type","submit",1,"btn","btn-primary","me-2",3,"disabled"],["routerLink","/suppliers/list",1,"btn","btn-secondary"],[1,"alert","alert-danger","mt-2"],[3,"value"],["formControlName","ward_code","placeholder","Ch\u1ecdn X\xe3",3,"searchable"]],template:function(t,n){1&t&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._uU(4,"Danh m\u1ee5c"),e.qZA()(),e.TgZ(5,"li",4),e._uU(6,"C\u1eadp nh\u1eadt danh m\u1ee5c"),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"h6",9),e._uU(12,"C\u1eadp nh\u1eadt danh m\u1ee5c"),e.qZA(),e.YNc(13,B,4,0,"div",10),e.YNc(14,W,57,15,"form",11),e.qZA()()()()),2&t&&(e.xp6(13),e.Q6J("ngIf",n.isLoading),e.xp6(1),e.Q6J("ngIf",!n.isLoading))},dependencies:[m.sg,m.O5,c.rH,c.yS,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,d.w9,d.jq]}),r})();var V=u(1094),z=u(9585),ee=u(9628),te=u(907),re=u(4826),ne=u(5351),oe=u(6134);const ie=[{path:"",component:T,children:[{path:"list",component:q},{path:"edit/:id",component:R},{path:"create",component:Y}]}];let se=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[m.ez,c.Bz.forChild(ie),z.xD,ee.L,te.dD,re.bB,ne.bQ.forRoot({animation:150,ghostClass:"bg-light"}),oe.ii.forRoot(),i.UX,d.A0,i.u5,V.yI.forRoot({validation:!0})]}),r})()}}]);